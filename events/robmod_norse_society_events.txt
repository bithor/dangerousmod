###########################################
#                                         #
# ROBMOD_NORSE Events					  #
#                                         #
# ID robmodnorse.00201 - 00308            #
#                                         #
###########################################

# 00201-00203: Power - Invite sorcerer
# 00204-00209: Power - Healing attempt
# 00210-00226: Power - Learn seidr
# 00227-00237: Power - Curse attempt
# 00238-00246: Quest - Learn potion craft
# 00247-00250: Quest - Send a Friggsister
# 00251-00254: Quest - Send an Oathsman
# 00255-00257: Joining - Order of the Vanir
# 00258-00260: Joining - Champions of Aesir
# 00261-00267: Power - Learn swordfighting
# 00268-00316: Power - Issue a challenge
# 00276-00277: Quest - Champions tombola
# 00278-00281: Quest - Win a duel
# 00282-00285: Quest - War focus
# 00286-00289: Quest - Acquire a weapon
# 00290-00293: Power - Acquire a weapon
# 00294-00297: Quest - Viking raid
# 00298-00301: Quest - Lead a battle
# 00302-00304: Power - Intimidate
# 00305-00308: Quest - Win a war of aggression
# 00309-00317: Power - Challenge the grand champion
# 00318-00319: Misc - Grand champion dies or leaves society, & Grand Champion nickname grant
# 00320-00321: Power - Inspire troops
# 00322-00329: Power - Teach swordfighting
# 00330-00330: Power - Raise Grand Champion's army
# 00331-00338: Power - Demand a Champion's Tournament
# 00339-00370: Power - Host a Champion's Tournament
# 00371-00374: Misc - Squireship events
# 00375-00378: Kappir-Holmgang notifications

namespace = robmodnorse

###JOINING###
##-Order of the Vanir-##
#From on_character_ask_to_join_society
character_event = {
    id = robmodnorse.00255
	hide_window = yes
    is_triggered_only = yes
    trigger = {
    	FROM = {
			leader = { society_member_of = monastic_order_norse } 
		}
    }
    immediate = {
    	FROM = { leader = { character_event = { id = robmodnorse.00256 } } }
    }
}

#Ping event
character_event = {
    id = robmodnorse.00256
	hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = { letter_event = { id = robmodnorse.00257 } }
    }
}

#Welcome letter
letter_event = {
    id = robmodnorse.00257
    desc = EVTDESC_ROBMODNORSE_00255
    border = GFX_event_letter_frame_religion

    is_triggered_only = yes
	
	immediate = { set_character_flag = society_join_block }
	
    option = { 
        name = EVTOPTA_ROBMODNORSE_00255

        FROM = { ROOT = { join_society = monastic_order_norse } }
		
		scaled_wealth = -0.25

        #FROM = { society = { save_event_target_as = joining_society } }
        #join_society = event_target:joining_society
		
		clr_character_flag = society_join_block
    }
}

##-Champions of Aesir-##
#From on_character_ask_to_join_society
character_event = {
    id = robmodnorse.00258
	hide_window = yes
    is_triggered_only = yes
    trigger = {
    	FROM = {
			leader = { society_member_of = norse_champions } 
		}
    }
    immediate = {
    	FROM = { leader = { character_event = { id = robmodnorse.00259 } } }
    }
}

#Ping event
character_event = {
    id = robmodnorse.00259
	hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = { letter_event = { id = robmodnorse.00260 } }
    }
}

#Welcome letter
letter_event = {
    id = robmodnorse.00260
    desc = EVTDESC_ROBMODNORSE_00260
    border = GFX_event_letter_frame_religion

    is_triggered_only = yes
	
	immediate = { set_character_flag = society_join_block }
	
    option = { 
        name = EVTOPTA_ROBMODNORSE_00260

        FROM = { ROOT = { join_society = norse_champions } }

        #FROM = { society = { save_event_target_as = joining_society } }
        #join_society = event_target:joining_society
		
		clr_character_flag = society_join_block
    }
}
###MISSIONS###
## ORDER OF THE VANIR ##
#QUEST: Learn potion craft
society_quest_event = {
	id = robmodnorse.00238
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_ROBMODNORSE_00238

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_learn_potion_craft
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00239 #acquire ingredients
				days = 10
			}
		}
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			modifier = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#Decides how to acquire ingredients
character_event = {
	id = robmodnorse.00239
	desc = EVTDESC_ROBMODNORSE_00239
	picture = GFX_evt_ritual_scroll
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00239 #My garden already contains most of these plants!
		trigger = { trait = gardener }
		character_event = {
			id = robmodnorse.00240 #Brew potion - 1st attempt
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00239_01
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00239 #I know someone who can acquire these ingredients
		trigger = { 
			NOT = { trait = gardener }
			any_courtier = {
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = gardener
			}
		}
		ai_chance = { factor = 1 }
		random_courtier = {
			limit = {
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = gardener
			}
			opinion = {
				modifier = opinion_pleased
				who = ROOT
				years = 2
			}
		}
		character_event = {
			id = robmodnorse.00240 #Brew potion - 1st attempt
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00239_01
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00239 #I will go out picking them myself, and make a garden
		trigger = { 
			is_incapable = no
			NOT = { trait = gardener }
		}
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00239_02 }
		ai_chance = { factor = 0 }
		random_list = {
        	50 = {
        		modifier = {
        			factor = 10
        			trait = gardener
        		}
        		modifier = {
        			factor = 1.2
        			trait = diligent
        		}
        		modifier = {
        			factor = 1.1
        			learning = 12
        		}
        		add_character_modifier = {
		        	name = green_fingers
		        	years = 10
				}
				hidden_tooltip = {
					character_event = {
						id = robmodnorse.00240 #Brew potion - 1st attempt
						days = 60
					}
				}
        	}
        	50 = {
        		modifier = {
        			factor = 10
        			trait = imbecile
        		}
        		modifier = {
        			factor = 0.5
        			trait = genius
        		}
		        add_character_modifier = {
		        	name = dirty_hands
		        	years = 5
				}
				hidden_tooltip = {
					character_event = {
						id = robmodnorse.00241 #Plants not growing - what to do?
						days = 60
					}
				}
        	}
        }
	}
}

# Plants not growing - what to do?
character_event = {
	id = robmodnorse.00241
	desc = EVTDESC_ROBMODNORSE_00241
	picture = GFX_evt_garden
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00241 #Ask for help from your castle groundsmen
		ai_chance = { factor = 1 }
		prestige = -10
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00240 #Brew potion - 1st attempt
				days = 30
			}
		}
		if = {
			limit = { trait = proud }
			random = {
				chance = 20
				remove_trait = proud
				hidden_tooltip = {
					character_event = { id = 38300 } # notify lost proud
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00241 #Give it up
		ai_chance = { factor = 0 }
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00241_02 }
		clr_quest = { 
			id = quest_learn_potion_craft
			failure = yes
		}
	}
}

# Potion brewing - 1st attempt
long_character_event = {
	id = robmodnorse.00240
	desc = EVTDESC_ROBMODNORSE_00240
	picture = GFX_evt_experiment
	border = GFX_event_long_frame_religion
	hide_from = yes

	is_triggered_only = yes
	
	immediate = {
		random_courtier = {
			limit = {
				prisoner = yes
			}
			save_event_target_as = robmod_prisoner_guineapig
		}
		random_courtier = {
			limit = {
				age = 16
				prisoner = no
				is_incapable = no
				is_landed = no
				NOT = {
					ROOT = { 
						opinion = {
							who = THIS
							value = 25 
						}
					}
				}
			}
			save_event_target_as = robmod_courtier_guineapig
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00240 #Force a prisoner to try it
		trigger = {
			any_courtier = { prisoner = yes }
		}
		ai_chance = { 
			factor = 5
			modifier = {
				factor = 20
				OR = {
					trait = cruel
					trait = arbitrary
				}
			}
			modifier = {
				factor = 10
				trait = craven
			}
		}
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00240_01 }
		event_target:robmod_prisoner_guineapig = {
			random_list = {
				50 = {
					modifier = {
						factor = 1.5
						ROOT = { learning = 12 }
					}
					ROOT = {
						character_event = {
							id = robmodnorse.00242 #Result
							tooltip = EVTTOOLTIP_ROBMODNORSE_00240_01a
						}
						set_character_flag = robmod_prisoner_no_illness
					}
				}
				50 = {
					modifier = {
						factor = 10
						ROOT = { trait = imbecile }
					}
					modifier = {
						factor = 0.5
						ROOT = { trait = genius }
					}
					ROOT = { 
						character_event = {
							id = robmodnorse.00242 #Result
							tooltip = EVTTOOLTIP_ROBMODNORSE_00240_01b
						}
						set_character_flag = robmod_prisoner_illness
					}
					add_character_modifier = {
						name = robmodnorse_shoddy_potion
						months = 3
					}
				}
			}
			opinion = {
				modifier = opinion_robmodnorse_forced_potion
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				NOR = {
					trait = cruel
					trait = kind
				}
			}
			random = {
				chance = 25
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259 } #Notify cruel
				}
			}
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
			hidden_tooltip = {
				character_event = { id = 38307 } #Notify not kind
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00240 #Force a courtier to try it
		trigger = {
			any_courtier = {
				age = 16
				prisoner = no
				is_incapable = no
				is_landed = no
				NOT = {
					ROOT = { 
						opinion = {
							who = THIS
							value = 25 
						}
					}
				}
			}
		}
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 20
				OR = {
					trait = cruel
					trait = arbitrary
				}
			}
			modifier = {
				factor = 10
				trait = craven
			}
		}
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00240_02 }
		event_target:robmod_courtier_guineapig = {
			random_list = {
				50 = {
					modifier = {
						factor = 1.5
						ROOT = { learning = 12 }
					}
					ROOT = {
						character_event = {
							id = robmodnorse.00242 #Result
							tooltip = EVTTOOLTIP_ROBMODNORSE_00240_02a
						}
						set_character_flag = robmod_courtier_no_illness
					}
				}
				50 = {
					modifier = {
						factor = 10
						ROOT = { trait = imbecile }
					}
					modifier = {
						factor = 0.5
						ROOT = { trait = genius }
					}
					ROOT = { 
						character_event = {
							id = robmodnorse.00242 #Result
							tooltip = EVTTOOLTIP_ROBMODNORSE_00240_02b
						}
						set_character_flag = robmod_courtier_illness
					}
					add_character_modifier = {
						name = robmodnorse_shoddy_potion
						months = 3
					}
				}
			}
			opinion = {
				modifier = opinion_robmodnorse_forced_potion
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				NOR = {
					trait = cruel
					trait = kind
				}
			}
			random = {
				chance = 25
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259 } #Notify cruel
				}
			}
		}
		if = {
			limit = { trait = kind }
			remove_trait = kind
			hidden_tooltip = {
				character_event = { id = 38307 } #Notify not kind
			}
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00240 #Try it myself
		ai_chance = { factor = 10 }
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00240_03 }
		random_list = {
        	50 = {
        		modifier = {
        			factor = 1.5
        			learning = 12
        		}
				character_event = {
					id = robmodnorse.00242 #Result
					tooltip = EVTTOOLTIP_ROBMODNORSE_00240_03a
				}
				set_character_flag = robmod_self_no_illness
        	}
        	50 = {
        		modifier = {
        			factor = 10
        			trait = imbecile
        		}
        		modifier = {
        			factor = 0.5
        			trait = genius
        		}
				character_event = {
					id = robmodnorse.00242 #Result
					tooltip = EVTTOOLTIP_ROBMODNORSE_00240_03b
				}
				add_character_modifier = {
		        	name = robmodnorse_shoddy_potion
		        	months = 3
				}
				set_character_flag = robmod_self_illness
        	}
        }
	}
}

character_event = {
	id = robmodnorse.00242
	desc = {
		trigger = { has_character_flag = robmod_prisoner_no_illness }
		text = EVTDESC_ROBMODNORSE_00242_01
	}
	desc = {
		trigger = { has_character_flag = robmod_prisoner_illness }
		text = EVTDESC_ROBMODNORSE_00242_02
	}
	desc = {
		trigger = { has_character_flag = robmod_courtier_no_illness }
		text = EVTDESC_ROBMODNORSE_00242_03
	}
	desc = {
		trigger = { has_character_flag = robmod_courtier_illness }
		text = EVTDESC_ROBMODNORSE_00242_04
	}
	desc = {
		trigger = { has_character_flag = robmod_self_no_illness }
		text = EVTDESC_ROBMODNORSE_00242_05
	}
	desc = {
		trigger = { has_character_flag = robmod_self_illness }
		text = EVTDESC_ROBMODNORSE_00242_06
	}
	picture = GFX_evt_experiment
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00242 #Oh well
		trigger = {
			OR = {
				has_character_flag = robmod_prisoner_no_illness
				has_character_flag = robmod_courtier_no_illness
				has_character_flag = robmod_self_no_illness
			}
		}
		ai_chance = { factor = 1 }
		character_event = {
			id = robmodnorse.00243 #Brew potion - 2nd attempt
			tooltip = EVTTOOLTIP_ROBMODNORSE_00242
			days = 60
		}
		clr_character_flag = robmod_prisoner_no_illness
		clr_character_flag = robmod_courtier_no_illness
		clr_character_flag = robmod_self_no_illness
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00242 #What a mess!
		trigger = {
			OR = {
				has_character_flag = robmod_prisoner_illness
				has_character_flag = robmod_courtier_illness
				has_character_flag = robmod_self_illness
			}
		}
		ai_chance = { factor = 1 }
		character_event = {
			id = robmodnorse.00243 #Brew potion - 2nd attempt
			tooltip = EVTTOOLTIP_ROBMODNORSE_00242
			days = 60
		}
		clr_character_flag = robmod_prisoner_illness
		clr_character_flag = robmod_courtier_illness
		clr_character_flag = robmod_self_illness
	}
}

# Potion final test
character_event = {
	id = robmodnorse.00243
	picture = GFX_evt_experiment
	desc = EVTDESC_ROBMODNORSE_00243
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00243 #Now for the final test
		character_event = {
			id = robmodnorse.00244 #Result of test
			tooltip = EVTTOOLTIP_ROBMODNORSE_00243
		}
	}
}

# Potion works!
character_event = {
	id = robmodnorse.00244
	picture = GFX_evt_dark_love
	desc = EVTDESC_ROBMODNORSE_00244
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			save_event_target_as = robmod_norse_vinir
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00244 #Send to Grandmaster
		event_target:robmod_norse_vinir = { 
			character_event = {
				id = robmodnorse.00245 #Ping back from Grandmaster
				tooltip = EVTTOOLTIP_ROBMODNORSE_00244
				days = 15
			}
		}
	}
}

# Ping back from Grandmaster
character_event = {
	id = robmodnorse.00245
	hide_window = yes
	
	is_triggered_only = yes
	
	option = {
		FROM = { 
			character_event = {	id = robmodnorse.00246 }
		}
	}
}

letter_event = {
	id = robmodnorse.00246
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_ROBMODNORSE_00246

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00246
		add_character_modifier = {
			modifier = robmodnorse_potions
			duration = -1
		}
		clr_quest = quest_learn_potion_craft
		sound_effect = hermetic_society_acquire_seed
		add_society_currency_medium_effect = yes
	}
}

#QUEST: Send a Friggsister
society_quest_event = {
	id = robmodnorse.00247
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_ROBMODNORSE_00247

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_send_friggsister
		set_character_flag = robmod_sending_friggsister
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00248
	hide_window = yes
		
	is_in_society = yes
	has_character_flag = robmod_sending_friggsister
	
	trigger = {
		has_quest = quest_send_friggsister
		has_character_modifier = robmodnorse_orderedfriggsister
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = robmodnorse.00249
			}
		}
		clr_character_flag = robmod_sending_friggsister
	}
}


#Ping
character_event = {
	id = robmodnorse.00249
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = { id = robmodnorse.00250 }
		}
	}
}

letter_event = {
	id = robmodnorse.00250
	desc = EVTDESC_ROBMODNORSE_00250
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00250
		clr_quest = quest_send_friggsister
		sound_effect = monastic_orders_pilgrimage
		hidden_effect = { monastic_order_purity_effect = yes }
		add_society_currency_medium_effect = yes
	}
}

#QUEST: Send an Oathsman
society_quest_event = {
	id = robmodnorse.00251
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_ROBMODNORSE_00251

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_send_oathsman
		set_character_flag = robmod_sending_oathsman
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00252
	hide_window = yes
	
	is_in_society = yes
	has_character_flag = robmod_sending_oathsman
	
	trigger = {
		has_quest = quest_send_oathsman
		has_character_modifier = robmodnorse_orderedoathsman
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = robmodnorse.00253
			}
		}
		clr_character_flag = robmod_sending_oathsman
	}
}

#Ping
character_event = {
	id = robmodnorse.00253
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00254
				days = 10
			}
		}
	}
}

letter_event = {
	id = robmodnorse.00254
	desc = EVTDESC_ROBMODNORSE_00254
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00254
		clr_quest = quest_send_oathsman
		sound_effect = monastic_orders_pilgrimage
		hidden_effect = { monastic_order_purity_effect = yes }
		add_society_currency_medium_effect = yes
	}
}

##-Champions of Aesir-##
#tombola
character_event = {
	id = robmodnorse.00276
	hide_window = yes

	is_triggered_only = yes
	is_in_society = yes

	trigger = {
		society_member_of = norse_champions
		is_society_grandmaster = no
		has_any_quest = no
		NOT = { is_inaccessible_trigger = yes }
		NOT = { has_character_modifier = quest_cooldown_timer }
	}

	immediate = {
		random_society_member = {
			limit = {
				is_society_grandmaster = yes
				same_society_as = ROOT
			}
			save_event_target_as = grand_champion
		}

		random_list = {
			10 = { 
				modifier = { 
					factor = 0 
					OR = {
						has_character_modifier = recent_duel_timer
						has_character_modifier = robmodnorse_won_duel
						has_character_modifier = robmodnorse_lost_duel
					}
				}
				set_character_flag = norse_champions_challenge_duel
			}
			10 = { 
				modifier = { 
					factor = 0 
					any_artifact = { 
						has_artifact_flag = combat_weapon
					}
				}
				set_character_flag = norse_champions_forge_weapon
			}
			10 = { 
				modifier = { 
					factor = 0 
					is_playable = no
					NOT = { has_minor_title = title_commander }
				}
				set_character_flag = norse_champions_win_a_battle
			}
			10 = { 
				modifier = { 
					factor = 0 
					is_playable = no
				}
				set_character_flag = norse_champions_viking_raid
			}
			10 = { 
				modifier = { 
					factor = 0 
					is_playable = no
				}
				modifier = { 
					factor = 0 
					war = yes
				}
				set_character_flag = norse_champions_war_of_aggression
			}
			10 = {
				modifier = { factor = 0 NOT = { has_dlc ="Way of Life" } }
				modifier = { factor = 0 has_focus = focus_war }
				modifier = { factor = 0 ai = yes } # Don't know how to compel AI to change focus!
				set_character_flag = norse_champions_focus_war
			}
			50 = { # AI bypasses missions at times
				modifier = {
					factor = 0
					ai = no
				}
				random_list = {
					70 = {
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
						add_mission_succeed_influence_effect = yes
					}
					30 = {
						add_mission_fail_influence_effect = yes
					}
				}
			}
			85 = {
				modifier = {
					factor = 0
					ai = no
				}
				#Do nothing for AI
			}
		}
		event_target:grand_champion = { character_event = { id = robmodnorse.00277 days = 7 random = 7 } }
	}
}

#Tombola Ping Event
character_event = {
	id = robmodnorse.00277
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			trigger_switch = {
				on_trigger = has_character_flag
				norse_champions_challenge_duel = 		{ clr_character_flag = norse_champions_challenge_duel society_quest_event = { id = robmodnorse.00278 } }
				norse_champions_forge_weapon = 			{ clr_character_flag = norse_champions_forge_weapon society_quest_event = { id = robmodnorse.00286 } }
				norse_champions_win_a_battle = 			{ clr_character_flag = norse_champions_win_a_battle society_quest_event = { id = robmodnorse.00298 } }
				norse_champions_viking_raid = 			{ clr_character_flag = norse_champions_viking_raid society_quest_event = { id = robmodnorse.00294 } }
				norse_champions_war_of_aggression = 	{ clr_character_flag = norse_champions_war_of_aggression society_quest_event = { id = robmodnorse.00305 } }
				norse_champions_focus_war = 			{ clr_character_flag = norse_champions_focus_war society_quest_event = { id = robmodnorse.00282 } }
			}
		}
	}
}

#QUEST: Win a duel
society_quest_event = {
	id = robmodnorse.00278
	border = GFX_event_letter_frame_war
	desc = EVTDESC_ROBMODNORSE_00278

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_win_duel
		set_character_flag = robmod_duel_quest
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00279
	hide_window = yes

	is_in_society = yes
	has_character_flag = robmod_duel_quest
	
	trigger = {
		has_quest = quest_robmod_win_duel
		has_character_modifier = robmodnorse_won_duel
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = robmodnorse.00280
			}
		}
		clr_character_flag = robmod_duel_quest
	}
}

#Ping
character_event = {
	id = robmodnorse.00280
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00281
			}
		}
	}
}

letter_event = {
	id = robmodnorse.00281
	desc = EVTDESC_ROBMODNORSE_00281
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00281
		clr_quest = quest_robmod_win_duel
		sound_effect = assassins_intimidate_ruler
		add_society_currency_medium_effect = yes
	}
}

#QUEST: War focus
society_quest_event = {
	id = robmodnorse.00282
	border = GFX_event_letter_frame_war
	desc = {
		trigger = { 
			OR = { 
				has_focus = focus_business
				has_focus = focus_rulership
			}
		}
		text = EVTDESC_ROBMODNORSE_00282_STEW
	}
	desc = {
		trigger = { has_focus = focus_hunting }
		text = EVTDESC_ROBMODNORSE_00282_HUNT
	}
	desc = {
		trigger = { 
			OR = { 
				has_focus = focus_carousing
				has_focus = focus_family
			}
		}
		text = EVTDESC_ROBMODNORSE_00282_DIPLO
	}
	desc = {
		trigger = { has_focus = focus_intrigue }
		text = EVTDESC_ROBMODNORSE_00282_INT
	}
	desc = {
		trigger = { has_focus = focus_seduction }
		text = EVTDESC_ROBMODNORSE_00282_SED
	}
	desc = {
		trigger = { 
			OR = { 
				has_focus = focus_theology
				has_focus = focus_scholarship
			}
		}
		text = EVTDESC_ROBMODNORSE_00282_LEARN
	}

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_war_focus
		set_character_flag = robmod_war_focus
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00283
	hide_window = yes
	
	
	is_in_society = yes
	has_character_flag = robmod_war_focus
	
	trigger = {
		has_quest = quest_robmod_war_focus
		has_focus = focus_war
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = robmodnorse.00284
			}
		}
		clr_character_flag = robmod_war_focus
	}
}

#Ping
character_event = {
	id = robmodnorse.00284
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00285
			}
		}
	}
}

letter_event = {
	id = robmodnorse.00285
	desc = EVTDESC_ROBMODNORSE_00285
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00285
		clr_quest = quest_robmod_war_focus
		sound_effect = assassins_intimidate_ruler
		add_society_currency_medium_effect = yes
	}
}

#QUEST: Acquire a weapon
society_quest_event = {
	id = robmodnorse.00286
	border = GFX_event_letter_frame_war
	desc = EVTDESC_ROBMODNORSE_00286

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_acquire_weapon
		set_character_flag = robmod_weapon_quest
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00287
	hide_window = yes
	
	is_in_society = yes
	has_character_flag = robmod_weapon_quest
	
	trigger = {
		has_quest = quest_robmod_acquire_weapon
		any_artifact = { 
			has_artifact_flag = combat_weapon
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = { id = robmodnorse.00288 }
		}
		clr_character_flag = robmod_weapon_quest
	}
}

#Ping
character_event = {
	id = robmodnorse.00288
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = { id = robmodnorse.00289 }
		}
	}
}

letter_event = {
	id = robmodnorse.00289
	desc = EVTDESC_ROBMODNORSE_00289
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00289
		clr_quest = quest_robmod_acquire_weapon
		sound_effect = assassins_intimidate_ruler
		add_society_currency_medium_effect = yes
	}
}

#QUEST: Viking raid
society_quest_event = {
	id = robmodnorse.00294
	border = GFX_event_letter_frame_war
	desc = EVTDESC_ROBMODNORSE_00294

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_viking_raid
		set_character_flag = robmod_viking_raid
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = robmodnorse.00295
	hide_window = yes
	
	is_in_society = yes
	has_character_flag = robmod_viking_raid
	
	is_triggered_only = yes
	
	trigger = {
		has_quest = quest_robmod_viking_raid
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = { id = robmodnorse.00296 }
		}
		clr_character_flag = robmod_viking_raid
	}
}

#Ping
character_event = {
	id = robmodnorse.00296
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = { id = robmodnorse.00297 }
		}
	}
}

#congrats from Grandmaster
letter_event = {
	id = robmodnorse.00297
	desc = EVTDESC_ROBMODNORSE_00297
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00297
		clr_quest = quest_robmod_viking_raid
		sound_effect = siege_won
		add_society_currency_major_effect = yes
	}
}

#QUEST: Win a battle
society_quest_event = {
	id = robmodnorse.00298
	border = GFX_event_letter_frame_war
	desc = EVTDESC_ROBMODNORSE_00298

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_win_battle
		set_character_flag = robmod_win_battle
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping - from on_action on_battle_won_leader
character_event = {
	id = robmodnorse.00299
	hide_window = yes

	is_in_society = yes
	has_character_flag = robmod_win_battle
	
	is_triggered_only = yes
	
	trigger = { has_quest = quest_robmod_win_battle }
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			combat_rating = 3
			NOT = { combat_rating = 5 }
		}
		modifier = {
			factor = 4
			combat_rating = 5
		}
		modifier = {
			factor = 2
			martial = 15
			NOT = { martial = 20 }
		}
		modifier = {
			factor = 3
			martial = 20
			NOT = { martial = 25 }
		}
		modifier = {
			factor = 4
			martial = 25
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 2
			trait = berserker
		}
		modifier = {
			factor = 2
			trait = valhalla_bound
		}
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = { id = robmodnorse.00300 days = 7 }
		}
		clr_character_flag = robmod_win_battle
	}
}

#Ping
character_event = {
	id = robmodnorse.00300
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = { id = robmodnorse.00301 }
		}
	}
}

#congrats from Grandmaster
letter_event = {
	id = robmodnorse.00301
	desc = EVTDESC_ROBMODNORSE_00301
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00301
		clr_quest = quest_robmod_win_battle
		sound_effect = battle_won
		add_society_currency_medium_effect = yes
	}
}

#QUEST: Win a war of aggression
society_quest_event = {
	id = robmodnorse.00305
	border = GFX_event_letter_frame_war
	desc = EVTDESC_ROBMODNORSE_00305

	is_triggered_only = yes

	option = {
		name = ACCEPT
		set_quest = quest_robmod_win_war
		set_character_flag = robmod_win_war
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		ai_chance = { factor = 0 }
	}
}

#if defender loses against you, ping to your grandmaster - from on_action on_war_ended_defeat
character_event = {
	id = robmodnorse.00306
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = { 
		FROM = {
			is_in_society = yes
			has_quest = quest_robmod_win_war
			has_character_flag = robmod_win_war
		}
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = FROM
				is_society_grandmaster = yes
			}
			character_event = { id = robmodnorse.00307 days = 7 }
		}
		FROM = { clr_character_flag = robmod_win_war }
	}
}

#Ping
character_event = {
	id = robmodnorse.00307
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROMFROM = {
			character_event = { id = robmodnorse.00308 }
		}
	}
}

#congrats from Grandmaster
letter_event = {
	id = robmodnorse.00308
	desc = EVTDESC_ROBMODNORSE_00308
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00308
		clr_quest = quest_robmod_win_war
		sound_effect = battle_won
		add_society_currency_major_effect = yes
	}
}

###POWERS###

##-Order of the Vanir-##
##POWER: Invite sorcerer 
character_event = {
    id = robmodnorse.00201
    hide_window = yes

    is_triggered_only = yes

    trigger = { society_member_of = monastic_order_norse }

	immediate = {
		clr_character_flag = sorcerer_arriving
		random_list = {
			#female
			80 = {
				random_list = {
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = yes
							age = 19
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = yes
							age = 37
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = yes
							age = 68
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
				}
			}
			#Male
			20 = {
				random_list = {
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = no
							age = 22
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = no
							age = 42
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty = none
							religion = ROOT
							female = no
							age = 65
							health = 6
						}
						new_character = { save_event_target_as = ascetic }
					}
				}
			}
		}

		event_target:ascetic = {
			join_prev_monastic_order_society = yes
		
			#Set correct education
			remove_education_effect = yes
			random_list = {
				60 = { add_trait = scholarly_theologian }
				40 = { add_trait = mastermind_theologian }
			}

			#Up  learning
			random_list = {
				25 = { change_learning = 3 }
				25 = { change_learning = 4 }
				25 = { change_learning = 5 }
				25 = { change_learning = 6 }
			}

			#Set some interesting traits
			add_trait = zealous
			remove_trait = cynical
			if = {
				limit = { religion_group = indian_group }
				remove_trait = kshatriya
				remove_trait = vaishya
				add_trait = brahmin
			}

			#Nice congential
			random_list = {
				10 = {
					add_trait = fair
					remove_trait = ugly
				}
				5 = {
					add_trait = genius
					remove_trait = imbecile
					remove_trait = quick
					remove_trait = slow
				}
				10 = {
					add_trait = quick
					remove_trait = imbecile
					remove_trait = genius
					remove_trait = slow
				}
				5 = {
					add_trait = strong
					remove_trait = weak
				}
				100 = { }
			}

			#Lifestyle
			remove_lifestyle_trait_effect = yes
			add_trait = mystic

			#Virtues
			remove_trait = lustful
			remove_trait = wroth
			remove_trait = gluttonous
			remove_trait = cruel
			random = {
				chance = 20
				add_trait = chaste
			}
			random = {
				chance = 20
				remove_trait = envious
				add_trait = kind
			}
			random = {
				chance = 20
				remove_trait = greedy
				add_trait = charitable
			}
			random = {
				chance = 10
				add_trait = temperate
			}
			random = {
				chance = 5
				add_trait = patient
				remove_trait = wroth
			}
			random = {
				chance = 10
				add_trait = humble
				remove_trait = proud
			}
			random = {
				chance = 5
				remove_trait = slothful
				remove_trait = diligent
			}

			#Misc traits
			remove_trait = deceitful
			remove_trait = arbitrary
			random = {
				chance = 10
				add_trait = honest
			}
			random = {
				chance = 10
				add_trait = just
			}
			random = {
				chance = 15
				add_trait = erudite
			}
			random = {
				chance = 10
				add_trait = content
				remove_trait = ambitious
			}
			random = {
				chance = 15
				add_trait = homosexual
			}
			if = {
				limit = { has_dlc = "Reapers" }
				random = {
					chance = 33
					add_trait = physician
				}
			}

			#Nicknames
			random_list = {
				10 = {
					give_nickname = nick_the_holy
				}
				10 = { 
					modifier = {
						factor = 0
						NAND = {
							trait = kind
							trait = charitable
							trait = humble
						}
					}
					give_nickname = nick_the_saint
				}
				10 = { 
					modifier = {
						factor = 0
						NAND = {
							trait = kind
							trait = charitable
						}
					}
					give_nickname = nick_the_kind
				}
				10 = { 
					modifier = {
						factor = 0
						NAND = {
							trait = charitable
							trait = just
						}
					}
					give_nickname = nick_the_good
				}
				10 = { 
					modifier = {
						factor = 0
						OR = {
							is_smart_trigger = yes
							trait = just
							trait = patient
							trait = scholar
						}
					}
					give_nickname = nick_the_wise
				}
				10 = { 
					modifier = {
						factor = 0
						NOT = { religion_group = christian }
					}
					give_nickname = nick_the_confessor
				}
				10 = { 
					modifier = {
						factor = 0
						NOT = { religion_group = christian }
					}
					give_nickname = nick_the_blessed
				}
				10 = { 
					modifier = {
						factor = 0
						NOT = { religion_group = christian }
					}
					give_nickname = nick_the_apostle
				}
				10 = { 
					modifier = {
						factor = 0
						NOT = { religion_group = christian }
					}
					give_nickname = nick_the_pious
				}
				50 = { }
			}
			character_event = { id = robmodnorse.00202 }	
		}
	}
}

#Ping event for new monk/nun
character_event = {
	id = robmodnorse.00202
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { character_event = { id = robmodnorse.00203 } }
	}
}

#Introduction of new monk/nun
character_event = {
	id = robmodnorse.00203
	desc = {
		trigger = { 
			FROM = { is_female = yes }
		}
		text = EVTDESC_ROBMODNORSE_00203_01
	}
	desc = {
		trigger = { 
			FROM = { is_female = no }
		}
		text = EVTDESC_ROBMODNORSE_00203_02
	}
	picture = GFX_norse_monastic_carving
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00203
		reverse_opinion = {
			who = FROM
			modifier = opinion_loyal_servant
		}
	}
}

##POWER: Healing attempt
#Notification of successul healing event
long_character_event = {
	id = robmodnorse.00204
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00204_01
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00204_02
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = { 
				FROM = { character = ROOT }
			}
			text = EVTOPTA_ROBMODNORSE_00204
		}
		name = {
			trigger = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			text = EXCELLENT
		}
		piety = 50
	}
}

#Successful healing event - target
long_character_event = {
	id = robmodnorse.00205
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00205_01
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00205_02
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00205
		ai_chance = { factor = 100 }
		random_list = {
			90 = {
				cure_illness = yes
				hidden_tooltip = {
					FROMFROM = {
						character_event = {
							id = robmodnorse.00208 #Notify successful
							days = 7
						}
					}
				}
			}
			10 = { 
				add_trait = possessed
				hidden_tooltip = {
					character_event = {
						id = 38315 #Notify Possessed
					}
				}
				hidden_tooltip = {
					FROMFROM = {
						character_event = {
							id = robmodnorse.00209 #Notify failed
							days = 7
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00205
		ai_chance = { factor = 0 }
	}
}

#Notification of unsuccessul healing event
long_character_event = {
	id = robmodnorse.00206
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00206_01
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00206_02
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00206
		piety = -10
	}
}

#Unsuccessful healing event - target
long_character_event = {
	id = robmodnorse.00207
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00207_01
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00207_02
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00207
	}
}

#Notification that illness has cleared
character_event = {
	id = robmodnorse.00208
	picture = GFX_evt_throne_room
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00208_01
		picture = GFX_evt_garden
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00208_02
	}
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = { 
				FROM = { character = ROOT }
			}
			text = EVTOPTA_ROBMODNORSE_00208_01
		}
		name = {
			trigger = { 
				FROM = { 
					NOT = { character = ROOT }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00208_02
		}
		FROM = {
			if = {
				limit = {
					NOT = { character = ROOT }
				}
				opinion = {
					modifier = opinion_robmodnorse_healed_me
					who = ROOT
					years = 10
				}
				hidden_tooltip = {
					remove_opinion = {
						modifier = opinion_robmodnorse_attempted_heal
						who = ROOT
					}
				}
			}
		}
		if = {
			limit = {
				is_female = yes
				has_nickname = no
			}
			random_list = {
				15 = { give_nickname = nick_volur }
				15 = { give_nickname = nick_seidkonur }
			}
		}
		if = {
			limit = {
				is_female = no
				has_nickname = no
			}
			random = {
				chance = 30
				give_nickname = nick_seidmadr
			}
		}
	}
}

#Notification that attempted heal resulted in possessed
character_event = {
	id = robmodnorse.00209
	picture = GFX_evt_loki_mischief
	desc = {
		trigger = { 
			FROM = { character = ROOT }
		}
		text = EVTDESC_ROBMODNORSE_00209_01
	}
	desc = {
		trigger = { 
			FROM = {
				NOT = { character = ROOT }
			}
		}
		text = EVTDESC_ROBMODNORSE_00209_02
	}
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = { 
				FROM = { character = ROOT }
			}
			text = EVTOPTA_ROBMODNORSE_00209_01
		}
		name = {
			trigger = { 
				FROM = { 
					NOT = { character = ROOT }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00209_02
		}
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00209 }
	}
}

##POWER: Learn seidr
#Send out request
character_event = {
	id = robmodnorse.00210
	picture = GFX_evt_scientist
	desc = EVTDESC_ROBMODNORSE_00210
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_realm_character = {
			limit = {
				age = 16
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = mystic
				religion = norse_pagan_reformed
			}
			save_event_target_as = robmodnorse_sorcerer
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00210
		if = { #if no suitable characters in realm, return failed request event
			limit = {
				NOT = {
					any_realm_character = {
						age = 16
						NOT = { is_foe = ROOT }
						prisoner = no
						is_incapable = no
						trait = mystic
						religion = norse_pagan_reformed
					}
				}
			}
			hidden_tooltip = {
				character_event = {
					id = robmodnorse.00211 #failed request
					days = 30
					random = 10
				}
			}
		}
		if = { #if there is a suitable characters in realm, return introduction event
			limit = {
				any_realm_character = {
					age = 16
					NOT = { is_foe = ROOT }
					prisoner = no
					is_incapable = no
					trait = mystic
					religion = norse_pagan_reformed
				}
			}
			hidden_tooltip = {
				character_event = {
					id = robmodnorse.00212 #introduction
					days = 15
					random = 5
				}
			}
		}
	}
}

#Failed request
character_event = {
	id = robmodnorse.00211
	picture = GFX_evt_spymaster
	desc = EVTDESC_ROBMODNORSE_00211
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00211 #broaden the search
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 20 }
					trait = greedy
				}
			}
		}
		set_character_flag = robmod_lookout_seidr
		wealth = -20
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00211 #give up the search
		ai_chance = { factor = 1 }
		clr_character_flag = learning_seidr
	}
}

#Broader search
character_event = {
	id = robmodnorse.00213
	picture = GFX_evt_spymaster
	desc = EVTDESC_ROBMODNORSE_00213
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	capable_only = yes
	prisoner = no
	religion = norse_pagan_reformed
	has_character_flag = robmod_lookout_seidr
	
	trigger = {
		any_character = {
			trait = mystic
			religion = norse_pagan_reformed
			age = 16
			NOT = { is_foe = ROOT }
			prisoner = no
			is_incapable = no
		}
	}
	
	mean_time_to_happen = {
		months = 24
		
		modifier = {
			factor = 0.5
			OR = {
				diplomacy = 12
				learning = 12
				piety = 200
			}
		}
	}
	
	immediate = {
		clr_character_flag = robmod_lookout_seidr
		random_character = {
			limit = {
				age = 16
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = mystic
				religion = norse_pagan_reformed
			}
			save_event_target_as = robmodnorse_sorcerer
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00213 #introduction
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 5 }
					trait = greedy
				}
			}
		}
		wealth = -5
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00212 #introduction
				days = 15
				random = 5
			}
			event_target:robmodnorse_sorcerer = { wealth = 5 }
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00213 #give up
		ai_chance = { factor = 1 }
		clr_character_flag = learning_seidr
	}
}

#Introduction to sorcerer - given first quest to catch a raven
long_character_event = {
	id = robmodnorse.00212
	desc = {
		trigger = { 
			event_target:robmodnorse_sorcerer = { is_female = no }
		}
		text = EVTDESC_ROBMODNORSE_00212_01
		picture = GFX_evt_shady_meeting
	}
	desc = {
		trigger = { 
			event_target:robmodnorse_sorcerer = { is_female = yes }
		}
		text = EVTDESC_ROBMODNORSE_00212_02
		picture = GFX_evt_seidrkona
	}
	border = GFX_event_long_frame_religion
	picture = GFX_evt_seidrkona
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00212 #very well
		character_event = {
			id = robmodnorse.00214 #found raven
			tooltip = EVTTOOLTIP_ROBMODNORSE_00212
			days = 30
		}
	}
}

#Found a suitable raven
character_event = {
	id = robmodnorse.00214
	picture = GFX_evt_raven_perching
	desc = {
		trigger = { 
			NOT = { has_character_flag = robmod_chased_raven }
		}
		text = EVTDESC_ROBMODNORSE_00214_01
	}
	desc = {
		trigger = { has_character_flag = robmod_chased_raven }
		text = EVTDESC_ROBMODNORSE_00214_02
	}
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00214 #Give food
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 4
				trait = genius
			}
			modifier = {
				factor = 2
				OR = {
					trait = patient
					trait = kind
					trait = quick
					trait = shrewd
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = slow
					trait = dull
					trait = inbred
				}
			}
			modifier = {
				factor = 0.05
				trait = imbecile
			}
		}
		character_event = {
			id = robmodnorse.00215 #raven eats the food
			tooltip = EVTTOOLTIP_ROBMODNORSE_00214_01
		}
		clr_character_flag = robmod_chased_raven
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00214 #Try to stroke it
		trigger = {
			NOT = { has_character_flag = robmod_chased_raven }
		}
		ai_chance = { 
			factor = 20
		}
		character_event = {
			id = robmodnorse.00216 #raven flies away
			tooltip = EVTTOOLTIP_ROBMODNORSE_00214_02
		}
		set_character_flag = robmod_chased_raven
	}
}

#Raven flies away
character_event = {
	id = robmodnorse.00216
	picture = GFX_evt_raven_perching
	desc = EVTDESC_ROBMODNORSE_00216
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00216 #damnit
		character_event = {
			id = robmodnorse.00214 #Finds a raven
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00216
		}
	}
}

#Raven eats the food
character_event = {
	id = robmodnorse.00215
	picture = GFX_evt_raven_perching
	desc = EVTDESC_ROBMODNORSE_00215
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00215
		character_event = {
			id = robmodnorse.00217 #Raven is tamed
			days = 45
			tooltip = EVTTOOLTIP_ROBMODNORSE_00215
		}
	}
}

#Raven is tamed
character_event = {
	id = robmodnorse.00217
	picture = GFX_evt_falconing
	desc = EVTDESC_ROBMODNORSE_00217
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00217
		add_character_modifier = {
			modifier = robmodnorse_hrafnhylli
			duration = -1
		}
		if = {
			limit = { 
				OR = {
					is_female = yes
					AND = {
						is_female = no
						has_character_modifier = robmodnorse_seidrasst
					}
				}
			}
			character_event = {
				id = robmodnorse.00218 #Next quest - no assistant required
				days = 10
				tooltip = EVTTOOLTIP_ROBMODNORSE_00217
			}
		}
		if = {
			limit = { 
				is_female = no
				NOT = { has_character_modifier = robmodnorse_seidrasst }
			}
			character_event = {
				id = robmodnorse.00223 #Next quest - assistant required
				days = 10
				tooltip = EVTTOOLTIP_ROBMODNORSE_00217
			}
		}
	}
}

#Is a man, told to find assistant
character_event = {
	id = robmodnorse.00223
	picture = GFX_evt_seidrkona
	desc = EVTDESC_ROBMODNORSE_00223
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00223 #very well
		character_event = {
			id = robmodnorse.00224 #found assistant
			tooltip = EVTTOOLTIP_ROBMODNORSE_00223
			days = 30
		}
	}
}

#Found a suitable assistant
long_character_event = {
	id = robmodnorse.00224
	picture = GFX_evt_irminsul_shrine
	desc = {
		trigger = { 
			NOT = { has_character_flag = robmod_offered_gold }
		}
		text = EVTDESC_ROBMODNORSE_00224_01
	}
	desc = {
		trigger = { has_character_flag = robmod_offered_gold }
		text = EVTDESC_ROBMODNORSE_00224_02
	}
	border = GFX_event_long_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00224 #Show her what you've learned
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 4
				trait = genius
			}
			modifier = {
				factor = 2
				OR = {
					trait = kind
					trait = quick
					trait = shrewd
					learning = 12
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = slow
					trait = dull
					trait = inbred
				}
			}
			modifier = {
				factor = 0.05
				trait = imbecile
			}
		}
		character_event = {
			id = robmodnorse.00225 #agrees to be your assistant
			tooltip = EVTTOOLTIP_ROBMODNORSE_00224_01
		}
		clr_character_flag = robmod_offered_gold
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00224 #Offer her gold
		trigger = {
			NOT = { has_character_flag = robmod_offered_gold }
		}
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 0
				NOT = { wealth = 10 }
			}
		}
		character_event = {
			id = robmodnorse.00226 #she eats the gold
			tooltip = EVTTOOLTIP_ROBMODNORSE_00224_02
		}
		wealth = -5
		set_character_flag = robmod_offered_gold
	}
}

#Woman eats gold
character_event = {
	id = robmodnorse.00226
	picture = GFX_evt_irminsul_shrine
	desc = EVTDESC_ROBMODNORSE_00226
	border = GFX_event_normal_frame_religion
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00226 #damnit
		character_event = {
			id = robmodnorse.00224 #Sees her again
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00226
		}
	}
}

#Woman agrees to join you
long_character_event = {
	id = robmodnorse.00225
	picture = GFX_evt_society_joining
	desc = EVTDESC_ROBMODNORSE_00225
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00218_01
		add_character_modifier = {
			modifier = robmodnorse_seidrasst
			duration = -1
		}
		if = {
			limit = {
				NOT = { trait = zealous	}
			}
			character_event = {
				id = robmodnorse.00220 #Begins to doubt
				days = 60
				tooltip = EVTTOOLTIP_ROBMODNORSE_00218	
			}
		}
		if = {
			limit = { trait = zealous }
			if = {
				limit = { is_landed = yes }
				character_event = {
					id = robmodnorse.00221 #No doubts, next quest
					days = 200
					tooltip = EVTTOOLTIP_ROBMODNORSE_00218
				}
			}
			if = {
				limit = { is_landed = no }
				character_event = {
					id = robmodnorse.00222 #No doubts, next quest. None landed characters don't have to do sacrifice (don't want too many people killed!)
					days = 205
				}
			}
		}
	}
}

#Training continues
long_character_event = {
	id = robmodnorse.00218
	picture = GFX_evt_magic_ritual
	desc = EVTDESC_ROBMODNORSE_00218
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = { is_female = no }
			text = EVTOPTA_ROBMODNORSE_00218_01
		}
		name = {
			trigger = { is_female = yes }
			text = EVTOPTA_ROBMODNORSE_00218_02
		}
		if = {
			limit = {
				NOT = { trait = zealous	}
			}
			character_event = {
				id = robmodnorse.00220 #Begins to doubt
				days = 60
				tooltip = EVTTOOLTIP_ROBMODNORSE_00218	
			}
		}
		if = {
			limit = { trait = zealous }
			if = {
				limit = { is_landed = yes }
				character_event = {
					id = robmodnorse.00221 #No doubts, next quest
					days = 200
					tooltip = EVTTOOLTIP_ROBMODNORSE_00219_01
				}
			}
			if = {
				limit = { is_landed = no }
				character_event = {
					id = robmodnorse.00222 #No doubts, next quest. None landed characters don't have to do sacrifice (don't want too many people killed!)
					days = 205
				}
			}
		}
	}
}

#Should I confront my tutor?
character_event = {
	id = robmodnorse.00220
	picture = GFX_evt_seidrkona
	desc = EVTDESC_ROBMODNORSE_00220
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00220 #yes
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00219 #Confronts tutor
				days = 5
			}
		}
	}
}

#Learns that much is not what it seems
long_character_event = {
	id = robmodnorse.00219
	picture = GFX_evt_courtiers_talking
	desc = EVTDESC_ROBMODNORSE_00219
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00219
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0.1
				trait = honest
			}
			modifier = {
				factor = 5
				trait = deceitful
			}
		}
		if = {
			limit = { is_landed = yes }
			character_event = {
				id = robmodnorse.00221 #Next quest
				days = 200
				tooltip = EVTTOOLTIP_ROBMODNORSE_00219_01
			}
		}
		if = {
			limit = { is_landed = no }
			character_event = {
				id = robmodnorse.00222 #None landed characters don't have to do sacrifice (don't want too many people killed!)
				days = 205
			}
		}
		if = {
			limit = { trait = honest }
			random = {
				chance = 50
				remove_trait = honest
				hidden_tooltip = {
					character_event = { id = 38311 }	#Notify lost honest
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00219
		ai_chance = { factor = 20 }
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00219_02 }
		event_target:robmodnorse_sorcerer = {
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 5
			}
		}
		random = {
			chance = 20
			add_trait = cynical
			hidden_tooltip = {
				character_event = { id = 38258 }	#Notify cynical
			}
		}
		clr_character_flag = learning_seidr
	}
}

# Must sacrifice someone
long_character_event = {
	id = robmodnorse.00221
	picture = GFX_evt_bad_news
	desc = EVTDESC_ROBMODNORSE_00221
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		spouse = { save_event_target_as = robmodnorse_spouse }
		random_consort = {
			limit = {
				NOT = { is_main_spouse = yes }
			}
			save_event_target_as = robmodnorse_concubine
		}
		random_child = {
			limit = {
				is_female = yes
				at_location = ROOT
			}
			save_event_target_as = robmodnorse_daughter
		}
		random_courtier = { save_event_target_as = robmodnorse_courtier }
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00221 # no!
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00221_01 }
		clr_character_flag = learning_seidr
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00221 # wife
		trigger = {
			any_spouse = {
				is_main_spouse = yes
			}
		}
		set_character_flag = robmod_sacrificed_wife
		character_event = {
			id = robmodnorse.00222 #sacrifice event
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00221_02
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00221 # concubine
		trigger = {
			any_courtier = {
				is_consort = ROOT
			}
		}
		set_character_flag = robmod_sacrificed_concubine
		character_event = {
			id = robmodnorse.00222 #sacrifice event
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00221_03
		}
	}
	
	option = {
		name = EVTOPTD_ROBMODNORSE_00221 # daughter
		trigger = {
			any_child = {
				is_female = yes
				at_location = ROOT
			}
		}
		set_character_flag = robmod_sacrificed_daughter
		character_event = {
			id = robmodnorse.00222 #sacrifice event
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00221_04
		}
	}
	
	option = {
		name = EVTOPTE_ROBMODNORSE_00221 # courtier
		trigger = {
			NOT = { num_of_spouses = 1 }
			any_child = {
				NAND = {
					is_female = yes
					at_location = ROOT
				}
			}
		}
		set_character_flag = robmod_sacrificed_courtier
		character_event = {
			id = robmodnorse.00222 #sacrifice event
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00221_05
		}
	}
}

# Sacrifice
long_character_event = {
	id = robmodnorse.00222
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { has_character_flag = robmod_sacrificed_wife }
		text = EVTDESC_ROBMODNORSE_00222_01
	}
	desc = {
		trigger = { has_character_flag = robmod_sacrificed_concubine }
		text = EVTDESC_ROBMODNORSE_00222_02
	}
	desc = {
		trigger = { has_character_flag = robmod_sacrificed_daughter }
		text = EVTDESC_ROBMODNORSE_00222_03
	}
	desc = {
		trigger = { has_character_flag = robmod_sacrificed_courtier }
		text = EVTDESC_ROBMODNORSE_00222_04
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00222 # it's done
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00222 }
		if = {
			limit = { has_character_flag = robmod_sacrificed_wife }
			event_target:robmodnorse_spouse = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		if = {
			limit = { has_character_flag = robmod_sacrificed_concubine }
			event_target:robmodnorse_concubine = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		if = {
			limit = { has_character_flag = robmod_sacrificed_daughter }
			event_target:robmodnorse_daughter = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		if = {
			limit = { has_character_flag = robmod_sacrificed_courtier }
			event_target:robmodnorse_courtier = {
				death = {
					death_reason = death_robmodnorse_disappeared
				}
			}
		}
		if = {
			limit = { is_female = no }
			add_character_modifier = {
				modifier = robmodnorse_seidrmadr
				duration = -1
			}
		}
		if = {
			limit = { is_female = yes }
			add_character_modifier = {
				modifier = robmodnorse_seidrkona
				duration = -1
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					is_female = yes
					has_nickname = no
				}
				random_list = {
					10 = { give_nickname = nick_volur }
					10 = { give_nickname = nick_seidkonur }
				}
			}
			if = {
				limit = {
					is_female = no
					has_nickname = no
				}
				random = {
					chance = 20
					give_nickname = nick_seidmadr
				}
			}
		}
		set_character_flag = robmodnorse_learnt_seidr
	}
}

##POWER: Curse attempt
#Choice of curse
character_event = {
	id = robmodnorse.00227
	picture = GFX_evt_seidrkona
	desc = EVTDESC_ROBMODNORSE_00227
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { save_event_target_as = robmodnorse_accursed }
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00227 #infertility
		set_character_flag = robmodnorse_infertility
		character_event = {
			id = robmodnorse.00228 #acquire item of theirs
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00227_01
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00227 #unpopularity
		set_character_flag = robmodnorse_unpopularity
		character_event = {
			id = robmodnorse.00228 #acquire item of theirs
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00227_02
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00227 #illness
		set_character_flag = robmodnorse_illness
		character_event = {
			id = robmodnorse.00228 #acquire item of theirs
			days = 5
			tooltip = EVTTOOLTIP_ROBMODNORSE_00227_03
		}
	}
}

#Must acquire an item of theirs
character_event = {
	id = robmodnorse.00228
	picture = GFX_evt_pagan_artifacts
	desc = EVTDESC_ROBMODNORSE_00228
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00228 #I will send my spymaster to steal it
		trigger = { ai = no }
		character_event = {
			id = robmodnorse.00229 #receives artifact
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00228_03
		}
		job_spymaster = {
			opinion = {
				modifier = opinion_irritated
				who = ROOT
				years = 2
			}
		}
		set_character_flag = robmodnorse_spysteal
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00228 #I will pay for someone to steal it
		trigger = { ai = no }
		scaled_wealth = {
			value = 0.5 
			min = 5
			max = 30
		}
		character_event = {
			id = robmodnorse.00229 #receives artifact
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00228_04
		}
		set_character_flag = robmodnorse_servantsteal
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00228 #I will steal it myself
		trigger = { 
			ai = no
			event_target:robmodnorse_accursed = { same_realm = ROOT }
		}
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00228_05 }
		if = {
			limit = { intrigue = 12 }
			random_list = {
				90 = { #successful theft
					character_event = {
						id = robmodnorse.00229
						days = 30
						tooltip = EVTTOOLTIP_ROBMODNORSE_00228_01
					}
					set_character_flag = robmodnorse_selfsteal
				}
				10 = { #unsuccessful theft
					character_event = {
						id = robmodnorse.00230
						days = 30
						tooltip = EVTTOOLTIP_ROBMODNORSE_00228_02
					}
				}
			}
		}
		if = {
			limit = { 
				NOT = { intrigue = 12 }
			}
			random_list = {
				75 = { #successful theft
					character_event = {
						id = robmodnorse.00229
						days = 30
						tooltip = EVTTOOLTIP_ROBMODNORSE_00228_01
					}
					set_character_flag = robmodnorse_selfsteal
				}
				25 = { #unsuccessful theft
					character_event = {
						id = robmodnorse.00230
						days = 30
						tooltip = EVTTOOLTIP_ROBMODNORSE_00228_02
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMOD_AI #AI choice
		trigger = { ai = yes }
		character_event = {
			id = robmodnorse.00229 #receives artifact
			days = 30
			tooltip = EVTTOOLTIP_ROBMOD_AI
		}
	}
}

# caught stealing
character_event = {
	id = robmodnorse.00230
	picture = GFX_evt_eavesdropping
	desc = EVTDESC_ROBMODNORSE_00230
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00230 #bribe the servant
		scaled_wealth = {
			value = 0.5 
			min = 20
			max = 100
		}
		character_event = {
			id = robmodnorse.00229 #receives item
			tooltip = EVTTOOLTIP_ROBMODNORSE_00230_01
		}
		set_character_flag = robmodnorse_selfsteal2
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00230 #kill the servant
		trigger = {
			NOR = {
				trait = kind
				trait = just
			}
		}
		character_event = {
			id = robmodnorse.00229 #receives item
			tooltip = EVTTOOLTIP_ROBMODNORSE_00230_02
		}
		random = {
			chance = 30
			add_trait = arbitrary
			hidden_tooltip = {
				character_event = { id = 38266 } #notify arbitrary
			}
		}
		set_character_flag = robmodnorse_selfsteal2
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00230 #do nothing
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00230_03 }
		if = {
			limit = {
				event_target:robmodnorse_accursed = {
					is_landed = yes
					NOT = { is_liege_or_above = ROOT }
				}
			}
			hidden_tooltip = { 
				character_event = { id = robmodnorse.00231 } #imprisoned
			}
			event_target:robmodnorse_accursed = { imprison = ROOT }
		}
		event_target:robmodnorse_accursed = { 
			opinion = {
				modifier = opinion_thief
				who = ROOT
				years = 20
			}
		}
		clr_character_flag = robmodnorse_attempting_curse
	}
}

# thrown into the dungeons
character_event = {
	id = robmodnorse.00231
	picture = GFX_evt_into_the_dungeon
	desc = EVTDESC_ROBMODNORSE_00231
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00231 #damnit
	}
}

# Receives item
character_event = {
	id = robmodnorse.00229
	picture = GFX_evt_spymaster
	desc = {
		trigger = { has_character_flag = robmodnorse_spysteal }
		text = EVTDESC_ROBMODNORSE_00229_01
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_servantsteal }
		text = EVTDESC_ROBMODNORSE_00229_02
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_selfsteal }
		text = EVTDESC_ROBMODNORSE_00229_03
		picture = GFX_evt_eavesdropping
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_selfsteal2 }
		text = EVTDESC_ROBMODNORSE_00229_04
		picture = GFX_evt_pagan_artifacts
	}
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00229 #make the preparations
		character_event = {
			id = robmodnorse.00232 #ritual
			days = 30
			tooltip = EVTTOOLTIP_ROBMODNORSE_00229
		}
		clr_character_flag = robmodnorse_spysteal
		clr_character_flag = robmodnorse_servantsteal
		clr_character_flag = robmodnorse_selfsteal
		clr_character_flag = robmodnorse_selfsteal2
	}
}

# Ritual - summons relevant God
long_character_event = {
	id = robmodnorse.00232
	picture = GFX_evt_magic_ritual
	desc = {
		trigger = { has_character_flag = robmodnorse_infertility }
		text = EVTDESC_ROBMODNORSE_00232_01
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_unpopularity }
		text = EVTDESC_ROBMODNORSE_00232_02
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_illness }
		text = EVTDESC_ROBMODNORSE_00232_03
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00232 #summon the God
		if = { 
			limit = {
				NOR = {
					learning = 15
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					piety = 500
				}
			}
			random_list = {
				60 = {
					character_event = { 
						id = robmodnorse.00233	# successful curse
						tooltip = EVTTOOLTIP_ROBMODNORSE_00232_01
					}
				} 
				40 = { 
					character_event = { 
						id = robmodnorse.00234	# unsuccessful curse
						tooltip = EVTTOOLTIP_ROBMODNORSE_00232_02
					}
				} 
			}
		}
		if = { 
			limit = {
				OR = {
					learning = 15
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					piety = 500
				}
			}
			random_list = {
				90 = {
					character_event = { 
						id = robmodnorse.00233	# successful curse
						tooltip = EVTTOOLTIP_ROBMODNORSE_00232_01
					}
				} 
				10 = {
					character_event = { 
						id = robmodnorse.00234	# unsuccessful curse
						tooltip = EVTTOOLTIP_ROBMODNORSE_00232_02
					}
				} 
			}
		}
	}
}

# Unsuccessful curse
character_event = {
	id = robmodnorse.00234
	picture = GFX_evt_magic_ritual
	desc = EVTDESC_ROBMODNORSE_00234
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00234 # what did I do wrong?
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00234 }
		event_target:robmodnorse_accursed = { 
			add_character_modifier = {
				modifier = robmodnorse_cursed
				years = 10
			}
			hidden_tooltip = {
				character_event = { id = robmodnorse.00235 } # notification of unsuccessful curse
			}
		}
		if = { 
			limit = {
				NOR = {
					learning = 15
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					piety = 500
				}
			}
			random = {
				chance = 50
				add_trait = possessed
				hidden_tooltip = {
					character_event = { id = robmodnorse.00236 } #notify possessed
				}
			}
		}
		if = { 
			limit = {
				OR = {
					learning = 15
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					piety = 500
				}
			}
			random = {
				chance = 30
				add_trait = possessed
				hidden_tooltip = {
					character_event = { id = robmodnorse.00236 } #notify possessed
				}
			}
		}
		clr_character_flag = robmodnorse_attempting_curse
	}
}

# Notify accursed of unsuccessful curse
character_event = {
	id = robmodnorse.00235
	picture = GFX_evt_bad_news
	desc = EVTDESC_ROBMODNORSE_00235
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			remove_character_modifier = robmodnorse_cursed
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00235 #wtf?
		add_character_modifier = {
			modifier = robmodnorse_cursed
			years = 10
		}
	}
}

# Notify of possession
character_event = {
	id = robmodnorse.00236
	picture = GFX_evt_loki_mischief
	desc = EVTDESC_ROBMODNORSE_00209_01
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00209_01
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00209 }
	}
}

# Successful curse - result
character_event = {
	id = robmodnorse.00233
	picture = GFX_evt_magic_ritual
	desc = EVTDESC_ROBMODNORSE_00233
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00233 # What has it done?
		custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00233 }
		if = { 
			limit = { has_character_flag = robmodnorse_infertility }
			event_target:robmodnorse_accursed = { 
				random_list = {
					30 = {
						custom_tooltip = {
							text = EVTTOOLTIP_ROBMODNORSE_00233_01
							set_character_flag = robmodnorse_cursed_infertile_1
						}
					} 
					70 = {
						custom_tooltip = {
							text = EVTTOOLTIP_ROBMODNORSE_00233_02
							set_character_flag = robmodnorse_cursed_infertile_2
						}
					}
				}
				
			}
		}
		if = { 
			limit = { has_character_flag = robmodnorse_unpopularity }
			event_target:robmodnorse_accursed = { 
				random_list = {
					40 = {
						custom_tooltip = {
							text = EVTTOOLTIP_ROBMODNORSE_00233_03
							set_character_flag = robmodnorse_cursed_unpopular_01
						}
					} 
					60 = {
						custom_tooltip = {
							text = EVTTOOLTIP_ROBMODNORSE_00233_06
							set_character_flag = robmodnorse_cursed_unpopular_02
						}
					}
				}
			}
		}
		if = { 
			limit = { has_character_flag = robmodnorse_illness }
			event_target:robmodnorse_accursed = { 
				random_list = {
					50 = {
						custom_tooltip = {
							text = EVTTOOLTIP_ROBMODNORSE_00233_04
							hidden_tooltip = {
								random_list = {
									25 = { 
										character_event = {
											id = RIP.5000
											days = 5
										}
									} 
									25 = {
										character_event = {
											id = RIP.5001
											days = 5
										}
									}
									25 = {
										character_event = {
											id = RIP.5002
											days = 5
										}
									}
									25 = {
										character_event = {
											id = RIP.5003
											days = 5
										}
									}
								}
								set_character_flag = robmodnorse_cursed_illness
							}
						}
					}
					50 = {
						custom_tooltip = { text = EVTTOOLTIP_ROBMODNORSE_00233_05 }
						set_character_flag = robmodnorse_cursed_illness
					}
				}
			}
		}
		hidden_tooltip = {
			event_target:robmodnorse_accursed = {
				character_event = { id = robmodnorse.00237 } # notification of successful curse
			}
		}
		clr_character_flag = robmodnorse_attempting_curse
		clr_character_flag = robmodnorse_infertility
		clr_character_flag = robmodnorse_unpopularity
		clr_character_flag = robmodnorse_illness
	}
}

# Notify accursed of successful curse
long_character_event = {
	id = robmodnorse.00237
	picture = GFX_evt_bad_news
	desc = {
		trigger = { 
			OR = {
				has_character_flag = robmodnorse_cursed_infertile_1
				has_character_flag = robmodnorse_cursed_infertile_2
			}
		}
		text = EVTDESC_ROBMODNORSE_00237_01
	}
	desc = {
		trigger = {
			OR = {
				has_character_flag = robmodnorse_cursed_unpopular_01
				has_character_flag = robmodnorse_cursed_unpopular_02
			}
		}
		text = EVTDESC_ROBMODNORSE_00237_02
	}
	desc = {
		trigger = { has_character_flag = robmodnorse_cursed_illness }
		text = EVTDESC_ROBMODNORSE_00237_03
	}
	border = GFX_event_long_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00237 #wtf?
		add_character_modifier = {
			modifier = robmodnorse_cursed
			years = 10
		}
		if = {
			limit = { has_character_flag = robmodnorse_cursed_infertile_1 }
			add_character_modifier = {
				modifier = robmodnorse_cursed_infertile_1
				duration = -1
			}
		}
		if = {
			limit = { has_character_flag = robmodnorse_cursed_infertile_2 }
			add_character_modifier = {
				modifier = robmodnorse_cursed_infertile_2
				duration = -1
			}
		}
		if = {
			limit = { has_character_flag = robmodnorse_cursed_unpopular_01 }
			add_character_modifier = {
				modifier = robmodnorse_cursed_unpopular
				duration = -1
			}
		}
		if = {
			limit = { has_character_flag = robmodnorse_cursed_unpopular_02 }
			add_trait = lunatic
			hidden_tooltip = {
				character_event = { id = 38304 }	#Notify lunatic
			}
		}
		if = {
			limit = { has_character_flag = robmodnorse_cursed_illness }
			add_character_modifier = {
				modifier = robmodnorse_cursed_illness
				duration = -1
			}
		}
		clr_character_flag = robmodnorse_cursed_infertile_1
		clr_character_flag = robmodnorse_cursed_infertile_2
		clr_character_flag = robmodnorse_cursed_unpopular_01
		clr_character_flag = robmodnorse_cursed_unpopular_02
		clr_character_flag = robmodnorse_cursed_illness
	}
}

##-Champions of Aesir-##
##POWER: Learn swordfighting
#Send out request
character_event = {
	id = robmodnorse.00261
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00261
	border = GFX_event_normal_frame_war
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_realm_character = {
			limit = {
				age = 16
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = duelist
				religion = norse_pagan_reformed
			}
			save_event_target_as = robmodnorse_duelist
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00261
		if = { #if no suitable characters in realm, return failed request event
			limit = {
				NOT = {
					any_realm_character = {
						age = 16
						NOT = { is_foe = ROOT }
						prisoner = no
						is_incapable = no
						trait = duelist
						religion = norse_pagan_reformed
					}
				}
			}
			hidden_tooltip = {
				character_event = {
					id = robmodnorse.00262 #failed request
					days = 30
					random = 10
				}
			}
		}
		if = { #if there is a suitable characters in realm, return introduction event
			limit = {
				any_realm_character = {
					age = 16
					NOT = { is_foe = ROOT }
					prisoner = no
					is_incapable = no
					trait = duelist
					religion = norse_pagan_reformed
				}
			}
			hidden_tooltip = {
				character_event = {
					id = robmodnorse.00263 #introduction
					days = 15
					random = 5
				}
			}
		}
	}
}

#Failed request
character_event = {
	id = robmodnorse.00262
	picture = GFX_evt_spymaster
	desc = EVTDESC_ROBMODNORSE_00262
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00262 #broaden the search
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 20 }
					trait = greedy
				}
			}
		}
		set_character_flag = robmod_lookout_swordfighter
		wealth = -20
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00262 #give up the search
		ai_chance = { factor = 1 }
		clr_character_flag = learning_swordfighting
	}
}

#Broader search
character_event = {
	id = robmodnorse.00264
	picture = GFX_evt_spymaster
	desc = EVTDESC_ROBMODNORSE_00264
	border = GFX_event_normal_frame_war
	hide_from = yes
	
	capable_only = yes
	prisoner = no
	religion = norse_pagan_reformed
	has_character_flag = robmod_lookout_swordfighter
	
	trigger = {
		any_character = {
			trait = duelist
			religion = norse_pagan_reformed
			age = 16
			NOT = { is_foe = ROOT }
			prisoner = no
			is_incapable = no
		}
	}
	
	mean_time_to_happen = {
		months = 24
		
		modifier = {
			factor = 0.5
			OR = {
				martial = 12
				prestige = 500
			}
		}
	}
	
	immediate = {
		clr_character_flag = robmod_lookout_swordfighter
		random_character = {
			limit = {
				age = 16
				NOT = { is_foe = ROOT }
				prisoner = no
				is_incapable = no
				trait = duelist
				religion = norse_pagan_reformed
			}
			save_event_target_as = robmodnorse_duelist
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00264 #introduction
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 5 }
					trait = greedy
				}
			}
		}
		wealth = -5
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00263 #introduction
				days = 15
				random = 5
			}
			event_target:robmodnorse_duelist = { wealth = 5 }
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00264 #give up
		ai_chance = { factor = 1 }
		clr_character_flag = learning_swordfighting
	}
}

#Introduction to duelist - begins learning
character_event = {
	id = robmodnorse.00263
	picture = GFX_evt_viking_throneroom_oldgods
	desc = EVTDESC_ROBMODNORSE_00263
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00263 #very well
		character_event = {
			id = robmodnorse.00265 #learnt
			tooltip = EVTTOOLTIP_ROBMODNORSE_00263
			days = 450
		}
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						trait = slothful
						trait = depressed
						trait = stressed
						trait = gluttonous
						trait = content
					}
				}
				character_event = {
					id = robmodnorse.00266 # remove a bad trait 
					days = 60
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOR = {
						trait = slothful
						trait = depressed
						trait = stressed
						trait = gluttonous
						trait = content
					}
				}
				character_event = {
					id = robmodnorse.00267 # add a good trait 
					days = 100
				}
			}
		}
	}
}

#Remove bad trait
character_event = {
	id = robmodnorse.00266
	picture = GFX_evt_holmgang
	desc = {
		trigger = {
			trait = slothful
			NOR = {
				trait = depressed
				trait = stressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_SLOTHFUL
	}
	desc = {
		trigger = {
			trait = depressed
			NOR = {
				trait = slothful
				trait = stressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_DEPRESSED
	}
	desc = {
		trigger = {
			trait = stressed
			NOR = {
				trait = slothful
				trait = depressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_STRESSED
	}
	desc = {
		trigger = {
			trait = gluttonous
			NOR = {
				trait = slothful
				trait = depressed
				trait = stressed
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_GLUTTON
	}
	desc = {
		trigger = {
			trait = content
			NOR = {
				trait = slothful
				trait = depressed
				trait = stressed
				trait = gluttonous
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_CONTENT
	}
	desc = {
		trigger = {
			calc_true_if = {
				amount = 2
				trait = content
				trait = slothful
				trait = depressed
				trait = stressed
				trait = gluttonous
			}
		}
		text = EVTDESC_ROBMODNORSE_00266_MULTIPLE
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00266 #I'm a better person!
		if = {
			limit = {
				trait = slothful
				NOR = {
					trait = depressed
					trait = stressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = slothful
			hidden_tooltip = {
				character_event = { id = 38298 }
			}
		}
		if = {
			limit = {
				trait = depressed
				NOR = {
					trait = slothful
					trait = stressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = depressed
			hidden_tooltip = {
				character_event = { id = 38314 }
			}
		}
		if = {
			limit = {
				trait = stressed
				NOR = {
					trait = slothful
					trait = depressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = stressed
			hidden_tooltip = {
				character_event = { id = 38313 }
			}
		}
		if = {
			limit = {
				trait = gluttonous
				NOR = {
					trait = slothful
					trait = depressed
					trait = stressed
					trait = content
				}
			}
			remove_trait = gluttonous
		}
		if = {
			limit = {
				trait = content
				NOR = {
					trait = slothful
					trait = depressed
					trait = stressed
					trait = gluttonous
				}
			}
			remove_trait = content
			hidden_tooltip = {
				character_event = { id = 38299 }
			}
		}
		if = {
			limit = {
				calc_true_if = {
					amount = 2
					trait = content
					trait = slothful
					trait = depressed
					trait = stressed
					trait = gluttonous
				}
			}
			random_list = {
				500 = { 
					modifier = { 
						factor = 0
						NOT = { trait = slothful }
					}
					remove_trait = slothful
					hidden_tooltip = {
						character_event = { id = 38298 }
					}
				} 
				400 = {
					modifier = { 
						factor = 0
						NOT = { trait = depressed }
					}
					remove_trait = depressed
					hidden_tooltip = {
						character_event = { id = 38314 }
					}
				}
				300 = {
					modifier = { 
						factor = 0
						NOT = { trait = stressed }
					}
					remove_trait = stressed
					hidden_tooltip = {
						character_event = { id = 38313 }
					}
				}
				200 = {
					modifier = { 
						factor = 0
						NOT = { trait = gluttonous }
					}
					remove_trait = gluttonous
				}
				100 = {
					modifier = { 
						factor = 0
						NOT = { trait = content }
					}
					remove_trait = content
					hidden_tooltip = {
						character_event = { id = 38299 }
					}
				}
			}
		}
	}
}

#Add good trait
character_event = {
	id = robmodnorse.00267
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00267
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00266 #I'm a better person!
		random_list = {
			400 = { 
				modifier = { 
					factor = 0
					trait = temperate
				}
				add_trait = temperate
				hidden_tooltip = {
					character_event = { id = 38276 }
				}
			} 
			300 = {
				modifier = { 
					factor = 0
					trait = robust
				}
				add_trait = robust
			}
			200 = {
				modifier = { 
					factor = 0
					trait = diligent
				}
				add_trait = diligent
				hidden_tooltip = {
					character_event = { id = 38256 }
				}
			}
			100 = {
				modifier = { 
					factor = 0
					trait = ambitious
				}
				add_trait = ambitious
				hidden_tooltip = {
					character_event = { id = 38278 }
				}
			}
		}
	}
}

#Training complete
character_event = {
	id = robmodnorse.00265
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00265
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00265 #I have learnt much
		add_character_modifier = {
			name = robmodnorse_learnt_swordfighting
		    duration = -1
		}
		clr_character_flag = learning_swordfighting
	}
}

##POWER: Issue a challenge
#Send challenge
character_event = {
	id = robmodnorse.00268
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00268
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00268
		FROM = {
			character_event = {
				id = robmodnorse.00269 #send challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00268
			}
			save_event_target_as = robmodnorse_opponent
		}
	}
}

#Receive challenge
character_event = {
	id = robmodnorse.00269
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00269
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00269 # I accept!
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 5
				OR = { 
					trait = brave
					trait = duelist
				}
			}
		}
		FROM = {
			character_event = {
				id = robmodnorse.00270 #accepted challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00269_01
				days = 7
			}
			save_event_target_as = robmodnorse_challenger
		}
		prestige = 50
		hidden_tooltip = { 
			add_character_modifier = {
				modifier = recent_duel_timer
				hidden = yes
				days = 365
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00269 # I decline
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 200
				trait = craven
			}
			modifier = {
				factor = 100
				trait = craven
				NOT = { trait = duelist }
			}
			modifier = {
				factor = 0
				is_society_grandmaster = yes
			}
			modifier = {
				factor = 50
				NOT = { combat_rating = 1 }
			}
		}
		FROM = {
			character_event = {
				id = robmodnorse.00271 #declined challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00269_02
				days = 7
			}
		}
		leave_society = yes
		prestige = -200
		set_character_flag = robmodnorse_refused_holmgang
	}
}

#Challenge declined
character_event = {
	id = robmodnorse.00271
	picture = GFX_evt_recieve_letter
	desc = EVTDESC_ROBMODNORSE_00271
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00271
		change_society_currency = 100
		opinion = {
			modifier = opinion_fled_duel
			who = FROM
			years = 100
		}
		hidden_tooltip = {
			remove_character_modifier = recent_duel_timer
		}
	}
}

#Challenge accepted
character_event = {
	id = robmodnorse.00270
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00270
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { has_character_flag = robmodnorse_mute_challenges }
					NOR = {
						character = ROOT
						character = FROM
					}
				}
				character_event = {	id = robmodnorse.00375 }	# All Norse characters informed of holmgang happening 
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00270
		FROM = {
			character_event = {
				id = robmodnorse.00272 #duel ping
				tooltip = EVTTOOLTIP_ROBMODNORSE_00270
				days = 30
			}
		}
	}
}

# Champions informed of holmgang happening. From is challenger, FromFrom is challenged.
character_event = {
	id = robmodnorse.00375
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00375
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00375
		custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00375 }	# duel takes place in a month
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00375
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00375 }
		set_character_flag = robmodnorse_mute_challenges
	}
}

#duel ping
character_event = {
	id = robmodnorse.00272
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00273 #duel
			}
		}
	}
}

# Duel (hidden)
character_event = {
	id = robmodnorse.00273
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		random_list = {
			200 = { # I win
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 1 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 2 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 3 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 4 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 5 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 6 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 7 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 8 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 9 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 10 }
					}
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						character_event = { id = robmodnorse.00274 }
					}
					10 = {
						set_character_flag = duel_wounded_opponent
						character_event = { id = robmodnorse.00274 }
					}
					8 = {
						set_character_flag = duel_maimed_opponent
						character_event = { id = robmodnorse.00274 }
					}
					2 = {
						set_character_flag = duel_killed_opponent
						character_event = { id = robmodnorse.00274 }
					}
				}
			}
			200 = { # opponent win
				modifier = {
					combat_rating_diff = { who = FROM value = 1 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 2 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 3 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 4 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 5 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 6 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 7 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 8 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 9 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 10 }
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						FROM = {
							character_event = { id = robmodnorse.00274 }
						}
					}
					10 = {
						FROM = {
							set_character_flag = duel_wounded_opponent
							character_event = { id = robmodnorse.00274 }
						}
					}
					8 = {
						FROM = { 
							set_character_flag = duel_maimed_opponent
							character_event = { id = robmodnorse.00274 }
						}
					}
					2 = {
						FROM = {	
							set_character_flag = duel_killed_opponent
							character_event = { id = robmodnorse.00274 }
						}
					}
				}
			}
		}
	}
}

# Winner event
long_character_event = {
	id = robmodnorse.00274
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00274_WON # Won duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00274_WOUND # Won duel and wounded
		trigger = {	has_character_flag = duel_wounded_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00274_MAIM # Won duel and maimed
		trigger = {	has_character_flag = duel_maimed_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00274_KILL # Won duel and killed
		trigger = {	has_character_flag = duel_killed_opponent }
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00274 # An honourable fight
		trigger = {
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
		add_society_currency_medium_effect = yes
		add_character_modifier = {
			modifier = robmodnorse_won_duel
			years = 2
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			hidden_tooltip = {
				FROMFROM = {
					long_character_event = { id = robmodnorse.00275 }
				}
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			hidden_tooltip = {
				FROM = {
					long_character_event = { id = robmodnorse.00275 }
				}
			}
		}	
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00274 # I wounded him
		trigger = { has_character_flag = duel_wounded_opponent }
		add_society_currency_medium_effect = yes
		add_character_modifier = {
			modifier = robmodnorse_won_duel
			years = 2
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = { 
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		clr_character_flag = duel_wounded_opponent
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00274 # I maimed him
		trigger = { has_character_flag = duel_maimed_opponent }
		add_society_currency_medium_effect = yes
		add_character_modifier = {
			modifier = robmodnorse_won_duel
			years = 2
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		clr_character_flag = duel_maimed_opponent
	}
	
	option = {
		name = EVTOPTD_ROBMODNORSE_00274 # I killed him
		trigger = { has_character_flag = duel_killed_opponent }
		add_society_currency_medium_effect = yes
		add_character_modifier = {
			modifier = robmodnorse_won_duel
			years = 2
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = {
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00275
					tooltip = EVTTOOLTIP_ROBMODNORSE_00275_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		clr_character_flag = duel_killed_opponent
	}
}

# Loser event
long_character_event = {
	id = robmodnorse.00275
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00275_LOST # Lost duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded
				has_character_flag = duel_maimed
				has_character_flag = duel_killed
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00275_WOUND # Lost duel and wounded
		trigger = {	has_character_flag = duel_wounded }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00275_MAIM # Lost duel and maimed
		trigger = {	has_character_flag = duel_maimed }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00275_KILLED # Lost duel and killed
		trigger = {	has_character_flag = duel_killed }
	}
	
	immediate = {
		hidden_tooltip = {
			any_society_member = {
				limit = {	
					society_member_of = norse_champions
					NOT = { has_character_flag = robmodnorse_mute_challenges }
					NOR = {
						character = ROOT
						character = FROM
					}
				}
				character_event = { id = robmodnorse.00376 }	# All society members informed of result of holmgang
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00275
		trigger = {
			NOR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
				has_character_flag = duel_killed
			}
		}
		add_character_modifier = {
			modifier = robmodnorse_lost_duel
			years = 2
		}
		prestige = -50
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00275
		trigger = {
			OR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
			}
		}
		add_character_modifier = {
			modifier = robmodnorse_lost_duel
			years = 2
		}
		prestige = -50
		if = {
			limit = { has_character_flag = duel_maimed }
			add_maimed_trait_effect = yes
		}
		if = {
			limit = { has_character_flag = duel_wounded }
			add_trait = wounded
		}
		clr_character_flag = duel_maimed
		clr_character_flag = duel_wounded
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00275
		trigger = { has_character_flag = duel_killed }
		death = {
			death_reason = death_robmodnorse_holmgang
			killer = FROM
		}
	}
}

# Champions informed of holmgang result. From is loser, FromFrom is winner.
character_event = {
	id = robmodnorse.00376
	picture = GFX_evt_holmgang
	desc = {
		text = EVTDESC_ROBMODNORSE_00376_LOST # Lost duel
		trigger = {	
			FROM = {
				NOR = { 
					has_character_flag = duel_wounded
					has_character_flag = duel_maimed
					has_character_flag = duel_killed
				}
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00376_WOUND # Lost duel and wounded
		trigger = {
			FROM = { has_character_flag = duel_wounded }
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00376_MAIM # Lost duel and maimed
		trigger = {
			FROM = { has_character_flag = duel_maimed }
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00376_KILLED # Lost duel and killed
		trigger = {
			FROM = { has_character_flag = duel_killed }
		}
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				FROM = {
					NOT = { has_character_flag = duel_killed }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00376_LIVED
		}
		name = {
			trigger = {
				FROM = { has_character_flag = duel_killed }
			}
			text = EVTOPTA_ROBMODNORSE_00376_DIED
		}
		tooltip = {
			FROMFROM = { prestige = 50 }
		}
		if = {
			limit = {
				FROM = {
					NOT = { has_character_flag = duel_killed }
				}
			}
			tooltip = {
				FROM = { prestige = -50 }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_wounded }
			}
			tooltip = {
				FROM = { add_trait = wounded }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_maimed }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_02 }
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_killed }
			}
			tooltip = {
				FROM = {
					death = {
						death_reason = death_robmodnorse_holmgang
						killer = FROMFROM
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00375
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00375 }
		set_character_flag = robmodnorse_mute_challenges
		tooltip = {
			FROMFROM = { prestige = 50 }
		}
		if = {
			limit = {
				FROM = {
					NOT = { has_character_flag = duel_killed }
				}
			}
			tooltip = {
				FROM = { prestige = -50 }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_wounded }
			}
			tooltip = {
				FROM = { add_trait = wounded }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_maimed }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_02 }
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_killed }
			}
			tooltip = {
				FROM = {
					death = {
						death_reason = death_robmodnorse_holmgang
						killer = FROMFROM
					}
				}
			}
		}
	}
}

##POWER: Challenge the Kappi-Mestr
#Send challenge
character_event = {
	id = robmodnorse.00309
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00309
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00309
		FROM = {
			character_event = {
				id = robmodnorse.00310 #send challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00309
			}
			save_event_target_as = robmodnorse_opponent
		}
	}
}

#Receive challenge
character_event = {
	id = robmodnorse.00310
	picture = GFX_evt_recieve_letter
	desc = EVTDESC_ROBMODNORSE_00310
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00310 # I accept!
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 5
				OR = { 
					trait = brave
					trait = duelist
				}
			}
		}
		FROM = {
			character_event = {
				id = robmodnorse.00311 #accepted challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00310_01
				days = 7
			}
			save_event_target_as = robmodnorse_challenger
		}
		prestige = 50
		hidden_tooltip = { 
			add_character_modifier = {
				modifier = recent_duel_timer
				hidden = yes
				days = 365
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00310 # I decline
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 100
				trait = craven
			}
			modifier = {
				factor = 100
				trait = craven
				NOT = { trait = duelist }
			}
			modifier = {
				factor = 50
				NOT = { combat_rating = 1 }
			}
		}
		FROM = {
			character_event = {
				id = robmodnorse.00312 #declined challenge
				tooltip = EVTTOOLTIP_ROBMODNORSE_00310_02
				days = 7
			}
		}
		leave_society = yes
		prestige = -200
		set_character_flag = robmodnorse_refused_holmgang
	}
}

#Challenge declined
character_event = {
	id = robmodnorse.00312
	picture = GFX_evt_recieve_letter
	desc = EVTDESC_ROBMODNORSE_00312
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00312
		change_society_currency = 100
		opinion = {
			modifier = opinion_fled_duel
			who = FROM
			years = 100
		}
		hidden_tooltip = {
			remove_character_modifier = recent_duel_timer
		}
	}
}

#Challenge accepted
character_event = {
	id = robmodnorse.00311
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00311
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { has_character_flag = robmodnorse_mute_challenges }
					NOR = {
						character = ROOT
						character = FROM
					}
				}
				character_event = {	id = robmodnorse.00377 }	# All society informed of holmgang happening 
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00311
		FROM = {
			character_event = {
				id = robmodnorse.00313 #duel ping
				tooltip = EVTTOOLTIP_ROBMODNORSE_00311
				days = 30
			}
		}
	}
}

# Champions informed of holmgang happening. From is challenger, FromFrom is Kappi-Mestr.
character_event = {
	id = robmodnorse.00377
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00377
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00377
		custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00375 }	# duel takes place in a month
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00375
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00375 }
		set_character_flag = robmodnorse_mute_challenges
	}
}

#duel ping
character_event = {
	id = robmodnorse.00313
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00314 #duel
			}
		}
	}
}

# Duel (hidden)
character_event = {
	id = robmodnorse.00314
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		random_list = {
			200 = { # I win
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 1 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 2 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 3 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 4 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 5 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 6 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 7 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 8 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 9 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 10 }
					}
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						character_event = { id = robmodnorse.00315 }
					}
					10 = {
						set_character_flag = duel_wounded_opponent
						character_event = { id = robmodnorse.00315 }
					}
					8 = {
						set_character_flag = duel_maimed_opponent
						character_event = { id = robmodnorse.00315 }
					}
					2 = {
						set_character_flag = duel_killed_opponent
						character_event = { id = robmodnorse.00315 }
					}
				}
			}
			200 = { # opponent win
				modifier = {
					combat_rating_diff = { who = FROM value = 1 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 2 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 3 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 4 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 5 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 6 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 7 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 8 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 9 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 10 }
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						FROM = {
							character_event = { id = robmodnorse.00315 }
						}
					}
					10 = {
						FROM = {
							set_character_flag = duel_wounded_opponent
							character_event = { id = robmodnorse.00315 }
						}
					}
					8 = {
						FROM = { 
							set_character_flag = duel_maimed_opponent
							character_event = { id = robmodnorse.00315 }
						}
					}
					2 = {
						FROM = {	
							set_character_flag = duel_killed_opponent
							character_event = { id = robmodnorse.00315 }
						}
					}
				}
			}
		}
	}
}

# Winner event
long_character_event = {
	id = robmodnorse.00315
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00315_WON # Won duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00315_WOUND # Won duel and wounded
		trigger = {	has_character_flag = duel_wounded_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00315_MAIM # Won duel and maimed
		trigger = {	has_character_flag = duel_maimed_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00315_KILL # Won duel and killed
		trigger = {	has_character_flag = duel_killed_opponent }
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTA_ROBMODNORSE_00315_GC
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTA_ROBMODNORSE_00315_NOTGC
		}
		trigger = {
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
		add_society_currency_major_effect = yes
		if = {
			limit = { is_society_grandmaster = yes }
			add_character_modifier = {
				modifier = robmodnorse_won_duel
				years = 2
			}
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}		
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			hidden_tooltip = {
				FROMFROM = {
					long_character_event = { id = robmodnorse.00316 }
				}
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			hidden_tooltip = {
				FROM = {
					long_character_event = { id = robmodnorse.00316 }
				}
			}
		}		
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTB_ROBMODNORSE_00315_GC_WOUND
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTB_ROBMODNORSE_00315_NOTGC_WOUND
		}
		trigger = { has_character_flag = duel_wounded_opponent }
		add_society_currency_major_effect = yes
		if = {
			limit = { is_society_grandmaster = yes }
			add_character_modifier = {
				modifier = robmodnorse_won_duel
				years = 2
			}
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = { 
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		clr_character_flag = duel_wounded_opponent
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTC_ROBMODNORSE_00315_GC_MAIMED
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTC_ROBMODNORSE_00315_NOTGC_MAIMED
		}
		trigger = { has_character_flag = duel_maimed_opponent }
		add_society_currency_major_effect = yes
		if = {
			limit = { is_society_grandmaster = yes }
			add_character_modifier = {
				modifier = robmodnorse_won_duel
				years = 2
			}
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		clr_character_flag = duel_maimed_opponent
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTD_ROBMODNORSE_00315_GC_KILLED
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTC_ROBMODNORSE_00315_NOTGC_KILLED
		}
		trigger = { has_character_flag = duel_killed_opponent }
		add_society_currency_major_effect = yes
		if = {
			limit = { is_society_grandmaster = yes }
			add_character_modifier = {
				modifier = robmodnorse_won_duel
				years = 2
			}
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = {
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00316
					tooltip = EVTTOOLTIP_ROBMODNORSE_00316_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		clr_character_flag = duel_killed_opponent
	}
}

# Loser event
long_character_event = {
	id = robmodnorse.00316
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00316_LOST # Lost duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded
				has_character_flag = duel_maimed
				has_character_flag = duel_killed
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00316_WOUND # Lost duel and wounded
		trigger = {	has_character_flag = duel_wounded }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00316_MAIM # Lost duel and maimed
		trigger = {	has_character_flag = duel_maimed }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00316_KILLED # Lost duel and killed
		trigger = {	has_character_flag = duel_killed }
	}
	
	immediate = {
		hidden_tooltip = {
			any_society_member = {
				limit = {	
					society_member_of = norse_champions
					NOT = { has_character_flag = robmodnorse_mute_challenges }
					NOR = {
						character = ROOT
						character = FROM
					}
				}
				character_event = { id = robmodnorse.00378 }	# All society members informed of result of holmgang
			}
		}
	}
	
	option = { 
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTA_ROBMODNORSE_00316_GC
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTA_ROBMODNORSE_00316_NOTGC
		}
		trigger = {
			NOR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
				has_character_flag = duel_killed
			}
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_lost_champion
				years = 5
			}
		}
		if = {
			limit = { is_society_grandmaster = yes }
			character_event = {
				id = robmodnorse.00317
				tooltip = EVTTOOLTIP_ROBMODNORSE_00316_FORFEIT
				days = 2
			}
			prestige = -50
		}
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTB_ROBMODNORSE_00316_GC_HURT
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTB_ROBMODNORSE_00316_NOTGC_HURT
		}
		trigger = {
			OR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
			}
		}
		if = {
			limit = { has_character_flag = duel_maimed }
			add_maimed_trait_effect = yes
		}
		if = {
			limit = { has_character_flag = duel_wounded }
			add_trait = wounded
		}
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_lost_champion
				years = 5
			}
		}
		if = {
			limit = { is_society_grandmaster = yes }
			character_event = {
				id = robmodnorse.00317
				tooltip = EVTTOOLTIP_ROBMODNORSE_00316_FORFEIT
				days = 2
			}
			prestige = -50
		}
		clr_character_flag = duel_maimed
		clr_character_flag = duel_wounded
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00316
		trigger = { has_character_flag = duel_killed }
		death = {
			death_reason = death_robmodnorse_holmgang
			killer = FROM
		}
	}
}

# Champions informed of holmgang result. From is loser, FromFrom is winner.
character_event = {
	id = robmodnorse.00378
	picture = GFX_evt_holmgang
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_LOST # Challenger lost duel
		trigger = {	
			FROM = {
				NOR = { 
					has_character_flag = duel_wounded
					has_character_flag = duel_maimed
					has_character_flag = duel_killed
				}
				is_society_grandmaster = no
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_WOUND # Challenger lost duel and wounded
		trigger = {
			FROM = {
				has_character_flag = duel_wounded
				is_society_grandmaster = no
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_MAIM # Challenger lost duel and maimed
		trigger = {
			FROM = {
				has_character_flag = duel_maimed
				is_society_grandmaster = no
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_KILLED # Challenger lost duel and killed
		trigger = {
			FROM = {
				has_character_flag = duel_killed
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_GCLOST # GC lost duel
		trigger = {	
			FROM = {
				NOR = { 
					has_character_flag = duel_wounded
					has_character_flag = duel_maimed
					has_character_flag = duel_killed
				}
				is_society_grandmaster = yes
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_GCWOUND # GC Lost duel and wounded
		trigger = {
			FROM = {
				has_character_flag = duel_wounded
				is_society_grandmaster = yes
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_GCMAIM # Lost duel and maimed
		trigger = {
			FROM = {
				has_character_flag = duel_maimed
				is_society_grandmaster = yes
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00378_GCKILLED # Lost duel and killed
		trigger = {
			FROM = {
				has_character_flag = duel_killed
				is_society_grandmaster = yes
			}
		}
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				FROM = { is_society_grandmaster = no }
			}
			text = EVTOPTA_ROBMODNORSE_00378_NOTGC
		}
		name = {
			trigger = {
				FROM = {
					is_society_grandmaster = yes
					NOT = { has_character_flag = duel_killed }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00378_GCALIVE
		}
		name = {
			trigger = {
				FROM = {
					is_society_grandmaster = yes
					has_character_flag = duel_killed
				}
			}
			text = EVTOPTA_ROBMODNORSE_00378_GCDEAD
		}		
		if = {
			limit = { 
				FROM = { is_society_grandmaster = yes }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_01 }
		}
		tooltip = {
			FROMFROM = { prestige = 50 }
		}
		if = {
			limit = {
				FROM = {
					NOT = { has_character_flag = duel_killed }
				}
			}
			tooltip = {
				FROM = { prestige = -50 }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_wounded }
			}
			tooltip = {
				FROM = { add_trait = wounded }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_maimed }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_02 }
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_killed }
			}
			tooltip = {
				FROM = {
					death = {
						death_reason = death_robmodnorse_holmgang
						killer = FROMFROM
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00375
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00375 }
		set_character_flag = robmodnorse_mute_challenges
		if = {
			limit = { 
				FROM = { is_society_grandmaster = yes }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_01 }
		}
		tooltip = {
			FROMFROM = { prestige = 50 }
		}
		if = {
			limit = {
				FROM = {
					NOT = { has_character_flag = duel_killed }
				}
			}
			tooltip = {
				FROM = { prestige = -50 }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_wounded }
			}
			tooltip = {
				FROM = { add_trait = wounded }
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_maimed }
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00378_02 }
		}
		if = {
			limit = {
				FROM = { has_character_flag = duel_killed }
			}
			tooltip = {
				FROM = {
					death = {
						death_reason = death_robmodnorse_holmgang
						killer = FROMFROM
					}
				}
			}
		}
	}
}

#Losing Grand Champion leaves
character_event = {
	id = robmodnorse.00317
	picture = GFX_evt_kappi_mestr
	desc = EVTDESC_ROBMODNORSE_00317
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00317
		leave_society = yes
		add_trait = robmodnorse_ex_grand_champion
		set_character_flag = robmod_forced_out_of_champions
	}
}

##POWER: Acquire a weapon
#Send out request
character_event = {
	id = robmodnorse.00290
	picture = GFX_evt_weaponsmith
	desc = EVTDESC_ROBMODNORSE_00290
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00290
		character_event = {
			id = robmodnorse.00291 #weaponsmith introduction
			tooltip = EVTTOOLTIP_ROBMODNORSE_00290
			days = 30
			random = 10
		}
	}
}

#Weaponsmith arrives, asks what you want made - axe, sword or mace?
character_event = {
	id = robmodnorse.00291
	picture = GFX_evt_weaponsmith
	desc = EVTDESC_ROBMODNORSE_00291
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00291 #Axe
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 0.5
				NOT = { culture = norse }
			}
		}
		character_event = {
			id = robmodnorse.00292 #what quality?
			tooltip = EVTTOOLTIP_ROBMODNORSE_00291_01
		}
		set_character_flag = robmod_axe_weapon
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00291 #Sword
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 4
				is_female = yes
			}
			modifier = {
				factor = 0.5
				culture = norse
			}
		}
		character_event = {
			id = robmodnorse.00292 #what quality?
			tooltip = EVTTOOLTIP_ROBMODNORSE_00291_02
		}
		set_character_flag = robmod_sword_weapon
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00291 #Mace
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 4
				is_priest = yes
			}
			modifier = {
				factor = 4
				trait = cruel
			}
		}
		character_event = {
			id = robmodnorse.00292 #what quality?
			tooltip = EVTTOOLTIP_ROBMODNORSE_00291_03
		}
		set_character_flag = robmod_mace_weapon
	}
}

#Weaponsmith asks what quality you want
character_event = {
	id = robmodnorse.00292
	picture = GFX_evt_weaponsmith
	desc = EVTDESC_ROBMODNORSE_00292
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00292
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 4
				is_ruler = no
			}
			modifier = {
				factor = 4
				trait = greedy
			}
		}
		character_event = {
			id = robmodnorse.00293 #weapon made
			tooltip = EVTTOOLTIP_ROBMODNORSE_00292_01
			days = 30
			random = 10
		}
		if = {
			limit = { has_character_flag = robmod_axe_weapon }
			set_character_flag = robmod_cheap_axe
			clr_character_flag = robmod_axe_weapon
		}
		if = {
			limit = { has_character_flag = robmod_sword_weapon }
			set_character_flag = robmod_cheap_sword
			clr_character_flag = robmod_sword_weapon
		}
		if = {
			limit = { has_character_flag = robmod_mace_weapon }
			set_character_flag = robmod_cheap_mace
			clr_character_flag = robmod_mace_weapon
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00292
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				NOT = { wealth = 200 }
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
		}
		character_event = {
			id = robmodnorse.00293 #weapon made
			tooltip = EVTTOOLTIP_ROBMODNORSE_00292_02
			days = 100
			random = 15
		}
		scaled_wealth = {
			value = -0.5 
			min = -200
			max = -25
		}
		if = {
			limit = { has_character_flag = robmod_axe_weapon }
			set_character_flag = robmod_reasonable_axe
			clr_character_flag = robmod_axe_weapon
		}
		if = {
			limit = { has_character_flag = robmod_sword_weapon }
			set_character_flag = robmod_reasonable_sword
			clr_character_flag = robmod_sword_weapon
		}
		if = {
			limit = { has_character_flag = robmod_mace_weapon }
			set_character_flag = robmod_reasonable_mace
			clr_character_flag = robmod_mace_weapon
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00292
		ai_chance = { 
			factor = 200
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 500 }
					trait = greedy
				}
			}
		}
		character_event = {
			id = robmodnorse.00293 #weapon made
			tooltip = EVTTOOLTIP_ROBMODNORSE_00292_03
			days = 150
			random = 20
		}
		scaled_wealth = {
			value = -1.5 
			min = -500
			max = -200
		}
		if = {
			limit = { has_character_flag = robmod_axe_weapon }
			set_character_flag = robmod_amazing_axe
			clr_character_flag = robmod_axe_weapon
		}
		if = {
			limit = { has_character_flag = robmod_sword_weapon }
			set_character_flag = robmod_amazing_sword
			clr_character_flag = robmod_sword_weapon
		}
		if = {
			limit = { has_character_flag = robmod_mace_weapon }
			set_character_flag = robmod_amazing_mace
			clr_character_flag = robmod_mace_weapon
		}
	}
}

#Weapon forged
character_event = {
	id = robmodnorse.00293
	picture = GFX_evt_relic_box
	desc = {
		text = EVTDESC_ROBMODNORSE_00293_CHEAP
		trigger = {
			OR = {
				has_character_flag = robmod_cheap_axe
				has_character_flag = robmod_cheap_sword
				has_character_flag = robmod_cheap_mace
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00293_GOOD
		trigger = {
			OR = {
				has_character_flag = robmod_reasonable_axe
				has_character_flag = robmod_reasonable_sword
				has_character_flag = robmod_reasonable_mace
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00293_GREAT
		trigger = {
			OR = {
				has_character_flag = robmod_amazing_axe
				has_character_flag = robmod_amazing_sword
				has_character_flag = robmod_amazing_mace
			}
		}
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				OR = {
					has_character_flag = robmod_cheap_axe
					has_character_flag = robmod_cheap_sword
					has_character_flag = robmod_cheap_mace
				}
			}
			text = EVTOPTA_ROBMODNORSE_00293_CHEAP
		}
		name = {
			trigger = {
				OR = {
					has_character_flag = robmod_reasonable_axe
					has_character_flag = robmod_reasonable_sword
					has_character_flag = robmod_reasonable_mace
				}
			}
			text = EVTOPTA_ROBMODNORSE_00293_GOOD
		}
		name = {
			trigger = {
				OR = {
					has_character_flag = robmod_amazing_axe
					has_character_flag = robmod_amazing_sword
					has_character_flag = robmod_amazing_mace
				}
			}
			text = EVTOPTA_ROBMODNORSE_00293_GREAT
		}
		if = {
			limit = { has_character_flag = robmod_cheap_axe }
			add_artifact = axe_tier_1
			clr_character_flag = robmod_cheap_axe
		}
		if = {
			limit = { has_character_flag = robmod_reasonable_axe }
			add_artifact = axe_tier_2
			clr_character_flag = robmod_reasonable_axe
		}
		if = {
			limit = { has_character_flag = robmod_amazing_axe }
			add_artifact = axe_tier_3_marauder
			clr_character_flag = robmod_amazing_axe
		}
		if = {
			limit = { has_character_flag = robmod_cheap_sword }
			add_artifact = sword_tier_1
			clr_character_flag = robmod_cheap_sword
		}
		if = {
			limit = { has_character_flag = robmod_reasonable_sword }
			add_artifact = sword_tier_2
			clr_character_flag = robmod_reasonable_sword
		}
		if = {
			limit = { has_character_flag = robmod_amazing_sword }
			add_artifact = sword_tier_3_fury
			clr_character_flag = robmod_amazing_sword
		}
		if = {
			limit = { has_character_flag = robmod_cheap_mace }
			add_artifact = mace_tier_1
			clr_character_flag = robmod_cheap_mace
		}
		if = {
			limit = { has_character_flag = robmod_reasonable_mace }
			add_artifact = mace_tier_2
			clr_character_flag = robmod_reasonable_mace
		}
		if = {
			limit = { has_character_flag = robmod_amazing_mace }
			add_artifact = mace_tier_3_foe_hammer
			clr_character_flag = robmod_amazing_mace
		}
	}
}

#POWER: Intimidate for favor
character_event = {
	id = robmodnorse.00302
	desc = EVTDESC_ROBMODNORSE_00302
	picture = GFX_evt_uncomfortable
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_MNM_6841
		tooltip = { FROM  = { add_favor = ROOT } }
		FROM = {
			opinion = {
				modifier = opinion_threatened_me
				who = ROOT
				years = 5
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = robmodnorse.00303 } } }
	}
}

character_event = {
	id = robmodnorse.00303
	desc = EVTDESC_ROBMODNORSE_00303
	picture = GFX_evt_uncomfortable
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_MNM_6840
		tooltip = { add_favor = FROM }
		tooltip = {
			reverse_opinion = {
				modifier = opinion_threatened_me
				who = FROMFROM
				years = 5
			}
		}
	}
}

#Fail 
character_event = {
	id = robmodnorse.00304
	desc = EVTDESC_ROBMODNORSE_00304
	picture = GFX_evt_uncomfortable
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = CURSES
		reverse_opinion = {
			modifier = opinion_threatened_me
			who = FROM
			years = 5
		}
	}
}

#POWER: Inspire armies
character_event = {
	id = robmodnorse.00320
	desc = EVTDESC_ROBMODNORSE_00320
	picture = GFX_evt_kappi_mestr
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00320 # At-Valholl!
		character_event = {
			id = robmodnorse.00321
			tooltip = EVTTOOLTIPA_ROBMODNORSE_00320
			days = 1
		}
		set_character_flag = robmodnorse_inspire_val
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00320 # For glory!
		character_event = {
			id = robmodnorse.00321
			tooltip = EVTTOOLTIPB_ROBMODNORSE_00320
			days = 1
		}
		set_character_flag = robmodnorse_inspire_glory
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00320 # Right of conquest
		trigger = { is_primary_war_attacker = yes }
		character_event = {
			id = robmodnorse.00321
			tooltip = EVTTOOLTIPC_ROBMODNORSE_00320
			days = 1
		}
		set_character_flag = robmodnorse_inspire_right
	}
	
	option = {
		name = EVTOPTD_ROBMODNORSE_00320 # For your families!
		trigger = { is_primary_war_defender = yes }
		character_event = {
			id = robmodnorse.00321
			tooltip = EVTTOOLTIPD_ROBMODNORSE_00320
			days = 1
		}
		set_character_flag = robmodnorse_inspire_fam
	}
}

#Speech
long_character_event = {
	id = robmodnorse.00321
	desc = {
		trigger = { has_character_flag =  robmodnorse_inspire_val }
		text = EVTDESC_ROBMODNORSE_00321_VAL
	}
	desc = {
		trigger = { has_character_flag =  robmodnorse_inspire_glory }
		text = EVTDESC_ROBMODNORSE_00321_GLORY
	}
	desc = {
		trigger = { has_character_flag =  robmodnorse_inspire_right }
		text = EVTDESC_ROBMODNORSE_00321_RIGHT
	}	
	desc = {
		trigger = { has_character_flag =  robmodnorse_inspire_fam }
		text = EVTDESC_ROBMODNORSE_00321_FAM
	}
	picture = GFX_evt_kappi_mestr
	border = GFX_event_long_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag =  robmodnorse_inspire_val }
			text = EVTOPTA_ROBMODNORSE_00321_VAL
		}
		name = {
			trigger = { has_character_flag =  robmodnorse_inspire_glory }
			text = EVTOPTA_ROBMODNORSE_00321_GLORY
		}
		name = {
			trigger = { has_character_flag =  robmodnorse_inspire_right }
			text = EVTOPTA_ROBMODNORSE_00321_RIGHT
		}	
		name = {
			trigger = { has_character_flag =  robmodnorse_inspire_fam }
			text = EVTOPTA_ROBMODNORSE_00321_FAM
		}
		add_character_modifier = {
			modifier = robmodnorse_champion_inspired_troops
			years = 5
		}
		clr_character_flag = robmodnorse_inspire_val
		clr_character_flag = robmodnorse_inspire_glory
		clr_character_flag = robmodnorse_inspire_right
		clr_character_flag = robmodnorse_inspire_fam
		clr_character_flag = robmodnorse_inspiring_troops
	}
}

#POWER: Teach swordfighting
#Begin swordtraining notification
character_event = {
	id = robmodnorse.00322
	desc = {
		trigger = { is_close_relative = FROM }
		text = EVTDESC_ROBMODNORSE_00322_REL
	}
	desc = {
		trigger = {
			NOT = { is_close_relative = FROM }
		}
		text = EVTDESC_ROBMODNORSE_00322_NOREL
	}
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { is_close_relative = FROM }
			text = EVTOPTA_ROBMODNORSE_00322_REL
		}
		name = {
			trigger = { 
				NOT = { is_close_relative = FROM }
			}
			text = EVTOPTA_ROBMODNORSE_00322_NOREL
		}
		FROM = {
			character_event = {
				id = robmodnorse.00323
				tooltip = EVTTOOLTIPA_ROBMODNORSE_00322
			}
		}
	}
}

#Teach swordfighting - begins learning
character_event = {
	id = robmodnorse.00323
	picture = GFX_evt_viking_throneroom_oldgods
	desc = {
		trigger = { is_close_relative = FROM }
		text = EVTDESC_ROBMODNORSE_00323_REL
	}
	desc = {
		trigger = {
			NOT = { is_close_relative = FROM }
		}
		text = EVTDESC_ROBMODNORSE_00323_NOREL
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00323 #very well
		ai_chance = { factor = 100 }
		character_event = {
			id = robmodnorse.00326 #learnt
			tooltip = EVTTOOLTIPA_ROBMODNORSE_00323
			days = 360
		}
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						trait = slothful
						trait = depressed
						trait = stressed
						trait = gluttonous
						trait = content
					}
				}
				character_event = {
					id = robmodnorse.00324 # remove a bad trait 
					days = 60
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOR = {
						trait = slothful
						trait = depressed
						trait = stressed
						trait = gluttonous
						trait = content
					}
				}
				character_event = {
					id = robmodnorse.00325 # add a good trait 
					days = 100
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00323 # No thank you
		ai_chance = { factor = 0 }
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00323 }
	}
}

#Remove bad trait
character_event = {
	id = robmodnorse.00324
	picture = GFX_evt_holmgang
	desc = {
		trigger = {
			trait = slothful
			NOR = {
				trait = depressed
				trait = stressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_SLOTHFUL
	}
	desc = {
		trigger = {
			trait = depressed
			NOR = {
				trait = slothful
				trait = stressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_DEPRESSED
	}
	desc = {
		trigger = {
			trait = stressed
			NOR = {
				trait = slothful
				trait = depressed
				trait = gluttonous
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_STRESSED
	}
	desc = {
		trigger = {
			trait = gluttonous
			NOR = {
				trait = slothful
				trait = depressed
				trait = stressed
				trait = content
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_GLUTTON
	}
	desc = {
		trigger = {
			trait = content
			NOR = {
				trait = slothful
				trait = depressed
				trait = stressed
				trait = gluttonous
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_CONTENT
	}
	desc = {
		trigger = {
			calc_true_if = {
				amount = 2
				trait = content
				trait = slothful
				trait = depressed
				trait = stressed
				trait = gluttonous
			}
		}
		text = EVTDESC_ROBMODNORSE_00324_MULTIPLE
	}
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00266 #I'm a better person!
		if = {
			limit = {
				trait = slothful
				NOR = {
					trait = depressed
					trait = stressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = slothful
			hidden_tooltip = {
				character_event = { id = 38298 }
			}
			set_character_flag = robmodnorse_remove_slothful
		}
		if = {
			limit = {
				trait = depressed
				NOR = {
					trait = slothful
					trait = stressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = depressed
			hidden_tooltip = {
				character_event = { id = 38314 }
			}
			set_character_flag = robmodnorse_remove_depressed
		}
		if = {
			limit = {
				trait = stressed
				NOR = {
					trait = slothful
					trait = depressed
					trait = gluttonous
					trait = content
				}
			}
			remove_trait = stressed
			hidden_tooltip = {
				character_event = { id = 38313 }
			}
			set_character_flag = robmodnorse_remove_stressed
		}
		if = {
			limit = {
				trait = gluttonous
				NOR = {
					trait = slothful
					trait = depressed
					trait = stressed
					trait = content
				}
			}
			remove_trait = gluttonous
			set_character_flag = robmodnorse_remove_gluttonous
		}
		if = {
			limit = {
				trait = content
				NOR = {
					trait = slothful
					trait = depressed
					trait = stressed
					trait = gluttonous
				}
			}
			remove_trait = content
			hidden_tooltip = {
				character_event = { id = 38299 }
			}
			set_character_flag = robmodnorse_remove_content
		}
		if = {
			limit = {
				calc_true_if = {
					amount = 2
					trait = content
					trait = slothful
					trait = depressed
					trait = stressed
					trait = gluttonous
				}
			}
			random_list = {
				500 = { 
					modifier = { 
						factor = 0
						NOT = { trait = slothful }
					}
					remove_trait = slothful
					hidden_tooltip = {
						character_event = { id = 38298 }
					}
					set_character_flag = robmodnorse_remove_slothful
				} 
				400 = {
					modifier = { 
						factor = 0
						NOT = { trait = depressed }
					}
					remove_trait = depressed
					hidden_tooltip = {
						character_event = { id = 38314 }
					}
					set_character_flag = robmodnorse_remove_depressed
				}
				300 = {
					modifier = { 
						factor = 0
						NOT = { trait = stressed }
					}
					remove_trait = stressed
					hidden_tooltip = {
						character_event = { id = 38313 }
					}
					set_character_flag = robmodnorse_remove_stressed
				}
				200 = {
					modifier = { 
						factor = 0
						NOT = { trait = gluttonous }
					}
					remove_trait = gluttonous
					set_character_flag = robmodnorse_remove_gluttonous
				}
				100 = {
					modifier = { 
						factor = 0
						NOT = { trait = content }
					}
					remove_trait = content
					hidden_tooltip = {
						character_event = { id = 38299 }
					}
					set_character_flag = robmodnorse_remove_content
				}
			}
		}
		hidden_tooltip = {
			FROMFROM = {
				character_event = {
					id = robmodnorse.00327
					days = 1
				}
			}
		}
	}
}

#Tutor told of improvement
character_event = {
	id = robmodnorse.00327
	desc = {
		trigger = {
			FROM = { has_character_flag = robmodnorse_remove_slothful }
		}
		text = EVTDESC_ROBMODNORSE_00327_SLO
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = robmodnorse_remove_depressed }
		}
		text = EVTDESC_ROBMODNORSE_00327_DEP
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = robmodnorse_remove_stressed }
		}
		text = EVTDESC_ROBMODNORSE_00327_STR
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = robmodnorse_remove_gluttonous }
		}
		text = EVTDESC_ROBMODNORSE_00327_GLU
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = robmodnorse_remove_content }
		}
		text = EVTDESC_ROBMODNORSE_00327_CON
	}
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00327 # OK
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_remove_slothful }
			}
			tooltip = {
				FROM = { remove_trait = slothful }
			}
			FROM = { clr_character_flag = robmodnorse_remove_slothful }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_remove_depressed }
			}
			tooltip = {
				FROM = { remove_trait = depressed }
			}
			FROM = { clr_character_flag = robmodnorse_remove_depressed }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_remove_stressed }
			}
			tooltip = {
				FROM = { remove_trait = stressed }
			}
			FROM = { clr_character_flag = robmodnorse_remove_stressed }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_remove_gluttonous }
			}
			tooltip = {
				FROM = { remove_trait = gluttonous }
			}
			FROM = { clr_character_flag = robmodnorse_remove_gluttonous }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_remove_content }
			}
			tooltip = {
				FROM = { remove_trait = content }
			}
			FROM = { clr_character_flag = robmodnorse_remove_content }
		}
	}
}

#Add good trait
character_event = {
	id = robmodnorse.00325
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00325
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00266 #I'm a better person!
		random_list = {
			400 = { 
				modifier = { 
					factor = 0
					trait = temperate
				}
				add_trait = temperate
				hidden_tooltip = {
					character_event = { id = 38276 }
				}
				set_character_flag = robmodnorse_add_temperate
			} 
			300 = {
				modifier = { 
					factor = 0
					trait = robust
				}
				add_trait = robust
				set_character_flag = robmodnorse_add_robust
			}
			200 = {
				modifier = { 
					factor = 0
					trait = diligent
				}
				add_trait = diligent
				hidden_tooltip = {
					character_event = { id = 38256 }
				}
				set_character_flag = robmodnorse_add_diligent
			}
			100 = {
				modifier = { 
					factor = 0
					trait = ambitious
				}
				add_trait = ambitious
				hidden_tooltip = {
					character_event = { id = 38278 }
				}
				set_character_flag = robmodnorse_add_ambitious
			}
		}
		hidden_tooltip = {
			FROMFROM = {
				character_event = { 
					id = robmodnorse.00328
					days = 1
				}
			}
		}
	}
}

#Tutor told of improvement
character_event = {
	id = robmodnorse.00328
	desc = EVTDESC_ROBMODNORSE_00328
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00327 # OK
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_add_temperate }
			}
			tooltip = {
				FROM = { add_trait = temperate }
			}
			FROM = { clr_character_flag = robmodnorse_add_temperate }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_add_robust }
			}
			tooltip = {
				FROM = { add_trait = robust }
			}
			FROM = { clr_character_flag = robmodnorse_add_robust }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_add_diligent }
			}
			tooltip = {
				FROM = { add_trait = diligent }
			}
			FROM = { clr_character_flag = robmodnorse_add_diligent }
		}
		if = {
			limit = {
				FROM = { has_character_flag = robmodnorse_add_ambitious }
			}
			tooltip = {
				FROM = { add_trait = ambitious }
			}
			FROM = { clr_character_flag = robmodnorse_add_ambitious }
		}
	}
}

#Training complete
character_event = {
	id = robmodnorse.00326
	picture = GFX_evt_holmgang
	desc = EVTDESC_ROBMODNORSE_00326
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00326 #I have learnt much
		add_character_modifier = {
			modifier = robmodnorse_learnt_swordfighting
		    duration = -1
		}
		opinion = {
			modifier = opinion_robmodnorse_taught_me_swordfighting
			who = FROMFROM
			years = 100
		}
		hidden_tooltip = {
			FROMFROM = {
				character_event = { id = robmodnorse.00329 }
			}
		}
		clr_character_flag = learning_swordfighting
	}
}

#Tutor told of training complete
character_event = {
	id = robmodnorse.00329
	desc = EVTDESC_ROBMODNORSE_00329
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { is_close_relative = FROM }
			text = EVTOPTA_ROBMODNORSE_00329_REL
		}
		name = {
			trigger = { 
				NOT = { is_close_relative = FROM }
			}
			text = EVTOPTA_ROBMODNORSE_00329_NOREL
		}
		tooltip = {
			FROM = {
				add_character_modifier = {
					modifier = robmodnorse_learnt_swordfighting
					duration = -1
				}
			}
		}
		tooltip = {
			FROM = {
				opinion = {
					modifier = opinion_robmodnorse_taught_me_swordfighting
					who = ROOT
					years = 100
				}
			}
		}
	}
}

#POWER: Raise army
character_event = {
	id = robmodnorse.00330
	desc = EVTDESC_ROBMODNORSE_00330
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00330 # At-Valholl!
		capital_scope = {
			ROOT = {
				spawn_unit = {
					owner = ROOT
					home = PREV
					province = PREV
					disband_on_peace = yes
					maintenance_multiplier = 0
					attrition = 0.5
					earmark = "CHAMPIONS"
					match_character = ROOT
					match_mult = 0.5
					match_max = 10000
					match_min = 2500
					can_toggle_looting = yes
					reinforces = yes
					reinforce_rate_multiplier = 0.5
					cannot_inherit = yes
				}
			}
		}
	}
}

#POWER: Demand tournament
character_event = {
	id = robmodnorse.00331
	desc = EVTDESC_ROBMODNORSE_00331
	picture = GFX_evt_relaxed_ruler
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00331 # Let's hope he responds
	}
}

# Kappi-Mestr decides
letter_event = {
	id = robmodnorse.00332
	desc = EVTDESC_ROBMODNORSE_00332
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00332 # Fine
		ai_chance = { factor = 100 }
		FROM = {
			character_event = {
				id = robmodnorse.00334
				days = 15
				tooltip = EVTTOOLTIPA_ROBMODNORSE_00332
			}
		}
		tooltip = {
			opinion = {
				modifier = opinion_irritated
				who = FROM
				years = 2
			}
		}
		hidden_tooltip = {
			character_event = {
				id = robmodnorse.00333
				days = 360
			}
		}
		set_character_flag = robmodnorse_champion_dem_tour
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00332 # No
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				trait = craven
			}
		}
		FROM = {
			character_event = {
				id = robmodnorse.00335
				days = 15
				tooltip = EVTTOOLTIPB_ROBMODNORSE_00332
			}
		}
		leave_society = yes
		set_character_flag = robmod_forced_out_of_champions
		add_trait = robmodnorse_ex_grand_champion
		prestige = -50
	}
}

# Kappi-Mestr responds to say yes within a year
letter_event = {
	id = robmodnorse.00334
	desc = EVTDESC_ROBMODNORSE_00334
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00334 # Very well
		tooltip = {
			FROM = {
				opinion = {
					modifier = opinion_irritated
					who = ROOT
					years = 2
				}
			}
		}
	}
}

# Kappi-Mestr responds to say no, and has left Champions
letter_event = {
	id = robmodnorse.00335
	desc = EVTDESC_ROBMODNORSE_00335
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00335 # Very well
		tooltip = {
			FROM = {
				opinion = {
					modifier = opinion_irritated
					who = ROOT
					years = 2
				}
			}
		}
	}
}

# Reminder
character_event = {
	id = robmodnorse.00333
	desc = {
		trigger = {
			has_society_currency_major_trigger = yes
			war = no			
			prisoner = no
			is_inaccessible_trigger = no
			is_incapable = no
			NOR = { 
				is_ill = yes
				trait = wounded
				trait = severely_injured
			}
		}
		text = EVTDESC_ROBMODNORSE_00333_CAN
	}
	desc = {
		trigger = {
			OR = {
				has_society_currency_major_trigger = no
				war = yes			
				prisoner = yes
				is_inaccessible_trigger = yes
				is_incapable = yes 
				is_ill = yes
				trait = wounded
				trait = severely_injured
			}
		}
		text = EVTDESC_ROBMODNORSE_00333_CANT
	}
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = {
		has_character_flag = robmodnorse_champion_dem_tour
		has_dlc = "Mystics"
		society_rank >= 4
		society_member_of = norse_champions
	}

	option = {
		name = EVTOPTA_ROBMODNORSE_00333 # I will do so now
		ai_chance = { factor = 100 }
		trigger = {
			has_society_currency_major_trigger = yes
			war = no			
			prisoner = no
			is_inaccessible_trigger = no
			is_incapable = no
			NOR = { 
				is_ill = yes
				trait = wounded
				trait = severely_injured
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPA_ROBMODNORSE_00333
			FROMFROM = {
				character_event = {
					id = robmodnorse.00338
					days = 5
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00333 # I need more time!
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				has_society_currency_major_trigger = no
				war = yes			
				prisoner = yes
				is_inaccessible_trigger = yes
				is_incapable = yes 
				is_ill = yes
				trait = wounded
				trait = severely_injured
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPB_ROBMODNORSE_00333
			FROMFROM = {
				character_event = {
					id = robmodnorse.00338
					months = 6
				}
			}
		}
		hidden_tooltip = {
			FROMFROM = {
				character_event = { id = robmodnorse.00337 }
			}
		}
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00333 # No
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				trait = craven
			}
		}
		FROMFROM = {
			character_event = {
				id = robmodnorse.00335
				tooltip = EVTTOOLTIPB_ROBMODNORSE_00332
			}
		}
		leave_society = yes
		set_character_flag = robmod_forced_out_of_champions
		add_trait = robmodnorse_ex_grand_champion
		prestige = -50
	}
}

#Ping from demander
character_event = {
	id = robmodnorse.00338
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = robmodnorse.00336 }
		}
	}
}

# Booted out if still hasn't hosted one
letter_event = {
	id = robmodnorse.00336
	desc = EVTDESC_ROBMODNORSE_00336
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	trigger = {
		has_character_flag = robmodnorse_champion_dem_tour
		has_dlc = "Mystics"
		society_rank >= 4
		society_member_of = norse_champions
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00336 # OK
		hidden_tooltip = {
			FROM = {
				character_event = { id = robmodnorse.00335 }
			}
		}
		leave_society = yes
		set_character_flag = robmod_forced_out_of_champions
		add_trait = robmodnorse_ex_grand_champion
		prestige = -50
	}
}

# Kappi-Mestr responds to say needs a while longer
letter_event = {
	id = robmodnorse.00337
	desc = EVTDESC_ROBMODNORSE_00337
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00337 # Very well
	}
}

#POWER: Host a Champion's Tournament
character_event = {
	id = robmodnorse.00339
	desc = EVTDESC_ROBMODNORSE_00339
	picture = GFX_evt_kappi_mestr
	border = GFX_event_normal_frame_war
	hide_from = yes

	is_triggered_only = yes
	
	immediate = {
		any_society_member = {
			limit = {
				society_member_of = norse_champions
				is_society_grandmaster = no
				is_inaccessible_trigger = no
				is_incapable = no
				prisoner = no
				NOR = { 
					is_ill = yes
					trait = wounded
					trait = severely_injured
				}
			}
			set_character_flag = robmodnorse_tournament_participating
		}
		random_society_member = {
			limit = {
				society_member_of = norse_champions
				society_rank = 1
				is_inaccessible_trigger = no
				is_incapable = no
				prisoner = no
				NOR = { 
					is_ill = yes
					trait = wounded
					trait = severely_injured
				}
			}
			save_event_target_as = robmodnorse_tournament_madr1
		}
		random_society_member = {
			limit = {
				society_member_of = norse_champions
				society_rank = 1
				is_inaccessible_trigger = no
				is_incapable = no
				prisoner = no
				NOR = { 
					is_ill = yes
					trait = wounded
					trait = severely_injured
				}
				NOT = { character = event_target:robmodnorse_tournament_madr1 }
			}
			save_event_target_as = robmodnorse_tournament_madr2
		}
	}

	option = {
		name = EVTOPTA_ROBMODNORSE_00339 # At-Valholl!
		any_society_member = {
			limit = {
				society_member_of = norse_champions
				has_character_flag = robmodnorse_tournament_participating
			}
			character_event = {
				id = robmodnorse.00341	# Champions invited to tournament
				tooltip = EVTTOOLTIPA_ROBMODNORSE_00339
				days = 5
			}
			hidden_tooltip = {
				character_event = {
					id = robmodnorse.00342	# Clear flag when tournament ends
					days = 100
				}
			}
		}
		hidden_tooltip = {
			any_character = {
				limit = {
					OR = {
						AND = {
							OR = {
								religion = norse_pagan_reformed
								religion = norse_pagan
							}
							culture = norse
						}
						society_member_of = norse_champions
					}
				}
				character_event = { 
					id = robmodnorse.00340	# Narrative event for all Norse characters (including Champions)
					days = 2
				}
			}
			event_target:robmodnorse_tournament_madr1 = {
				character_event = {
					id = robmodnorse.00347	# Opening bout
					days = 20
				}
			}
			character_event = {
				id = robmodnorse.00343	# Conclusion decided - ping
				months = 3
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
				}
				character_event = { 
					id = robmodnorse.00352 # Champion earns great respect
					days = 41
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
				}
				character_event = { 
					id = robmodnorse.00352 # Champion earns great respect
					months = 2
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					trait = slothful
				}
				character_event = { 
					id = robmodnorse.00357 # Champion loses slothful
					months = 1
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					NOR = { 
						trait = slothful
						trait = diligent
					}
				}
				character_event = { 
					id = robmodnorse.00357 # Champion gains diligent
					days = 63
					random = 4
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					trait = depressed
				}
				character_event = { 
					id = robmodnorse.00358 # Champion loses depressed
					days = 45
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					trait = stressed
				}
				character_event = { 
					id = robmodnorse.00359 # Champion loses stressed
					days = 70
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					trait = content
				}
				character_event = { 
					id = robmodnorse.00370 # Champion loses content
					days = 70
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					NOR = { 
						trait = content
						trait = ambitious
					}
				}
				character_event = { 
					id = robmodnorse.00370 # Champion gains ambitious
					days = 70
				}
			}
			random = {
				chance = 10
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00344 # Champion killed during tournament
						months = 1
					}
				}
			}
			random = {
				chance = 10
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00345 # Champion maimed during tournament
						days = 27
						random = 10
					}
				}
			}
			random = {
				chance = 10
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00345 # Champion maimed during tournament
						days = 62
						random = 10
					}
				}
			}
			random = {
				chance = 50
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00346 # Champion wounded during tournament
						days = 25
						random = 5
					}
				}
			}
			random = {
				chance = 50
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00346 # Champion wounded during tournament
						days = 59
						random = 10
					}
				}
			}
			random = {
				chance = 50
				random_society_member = {
					limit = {
						society_member_of = norse_champions
						has_character_flag = robmodnorse_tournament_participating
					}
					character_event = { 
						id = robmodnorse.00346 # Champion wounded during tournament
						days = 71
						random = 10
					}
				}
			}
		}
	}
}

# Kappi-Mestr invites you to the Tournament
letter_event = {
	id = robmodnorse.00341
	desc = EVTDESC_ROBMODNORSE_00341
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00341 # At-Valholl!
		ai_chance = { factor = 1 }
		custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00341 }
		prestige = 50
		add_character_modifier = {
			modifier = robmodnorse_tournament_participating
			months = 3
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00341 # No
		ai_chance = { factor = 0 }
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00341 }
		prestige = -100
		leave_society = yes
		FROM = {
			opinion = {
				modifier = opinion_very_disappointed
				who = ROOT
				years = 5
			}
		}
		set_character_flag = robmod_forced_out_of_champions
	}
}

# Clear flag debug event
character_event = {
	id = robmodnorse.00342
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = { 
		clr_character_flag = robmodnorse_tournament_participating
		clr_character_flag = robmodnorse_tournament_fought_well
		clr_character_flag = robmodnorse_tournament_dnd
		remove_character_modifier = robmodnorse_tournament_participating
	}
}

# All Norse characters told about the Champion's Tournament
narrative_event = {
	id = robmodnorse.00340
	title = EVTTITLE_ROBMODNORSE_00340
	desc = EVTDESC_ROBMODNORSE_00340
	picture = GFX_evt_holmgang
	border = GFX_event_narrative_frame_war
	hide_from = yes

	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				NOT = { society_member_of = norse_champions }
			}
			text = EVTOPTA_ROBMODNORSE_00340_OBS
		}
		name = {
			trigger = { has_character_flag = robmodnorse_tournament_participating }
			text = EVTOPTA_ROBMODNORSE_00340_PAR
		}
		name = {
			trigger = { 
				society_member_of = norse_champions
				NOT = { has_character_flag = robmodnorse_tournament_participating }
				is_society_grandmaster = no
			}
			text = EVTOPTA_ROBMODNORSE_00340_NOT
		}
		name = {
			trigger = { 
				society_member_of = norse_champions
				is_society_grandmaster = yes
			}
			text = EVTOPTA_ROBMODNORSE_00340_GC
		}
		if = {
			limit = {
				society_member_of = norse_champions
				NOT = { has_character_flag = robmodnorse_tournament_participating }
				is_society_grandmaster = no 
			}
			custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00340 }
		}
	}
}

# Opening bout duel ping
character_event = {
	id = robmodnorse.00347
	desc = EVTDESC_ROBMODNORSE_00347
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = robmodnorse_tournament_participating
		event_target:robmodnorse_tournament_madr2 = { has_character_flag = robmodnorse_tournament_participating }
	}
	
	immediate = {
		hidden_tooltip = {
			event_target:robmodnorse_tournament_madr2 = {
				character_event = {
					id = robmodnorse.00349 #duel
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00347
		custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00347 }
	}
}

# Opening bout decided (ROOT is robmodnorse_tournament_madr2, FROM is robmodnorse_tournament_madr1)
character_event = {
	id = robmodnorse.00349
	desc = EVTDESC_ROBMODNORSE_00347
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			random_list = {
				200 = { # robmodnorse_tournament_madr2 wins
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 1 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 2 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 3 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 4 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 5 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 6 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 7 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 8 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 9 }
						}
						factor = 0.7
					}
					modifier = {
						FROM = {
							combat_rating_diff = { who = ROOT value = 10 }
						}
						factor = 0.7
					}
					### effects
					character_event = {
						id = robmodnorse.00350 # winners event
						days = 1
					}
				}
				200 = { # robmodnorse_tournament_madr1 wins
					modifier = {
						combat_rating_diff = { who = FROM value = 1 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 2 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 3 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 4 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 5 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 6 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 7 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 8 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 9 }
						factor = 0.7
					}
					modifier = {
						combat_rating_diff = { who = FROM value = 10 }
						factor = 0.7
					}
					### effects
					FROM = {
						character_event = {
							id = robmodnorse.00350 # winners event
							days = 1
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00347		
		custom_tooltip = { text = EVTTOOLTIPA_ROBMODNORSE_00347 }
	}
}

# Opening bout winner event
long_character_event = {
	id = robmodnorse.00350
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	desc = {
		trigger = { character = FROM }
		text = EVTDESC_ROBMODNORSE_00350_MADR2 # Madr 2 is ROOT
	}
	desc = {
		trigger = {
			NOT = { character = FROM }
		}
		text = EVTDESC_ROBMODNORSE_00350_MADR1 # Madr 1 is ROOT
	}		
	
	immediate = {
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			hidden_tooltip = {
				FROMFROM = {
					long_character_event = { id = robmodnorse.00351 }
				}
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			hidden_tooltip = {
				FROM = {
					long_character_event = { id = robmodnorse.00351 }
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00350 # An honourable fight
		add_society_currency_medium_effect = yes
		prestige = 30
		if = {
			limit = { trait = humble }
			random = {
				chance = 50
				remove_trait = humble
				hidden_tooltip = {
					character_event = { id = 38312 }
				}
			}
		}
		if = {
			limit = {
				NOR = {
					trait = humble
					trait = proud
				}
			}
			random = {
				chance = 20
				add_trait = proud
				hidden_tooltip = {
					character_event = { id = 38261 }
				}
			}
		}
	}
}

# Opening bout loser event - Root is loser, From is winner
long_character_event = {
	id = robmodnorse.00351
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	desc = EVTDESC_ROBMODNORSE_00351
	
	immediate = {
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = robmodnorse.00369 }	# inform all other society members of the winner of the opening bout
			}
		}
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00351
		prestige = -10
		clr_character_flag = robmodnorse_tournament_participating
		remove_character_modifier = robmodnorse_tournament_participating
	}
}

# Opening bout result shared with other Champions (From is the loser, FromFrom is the winner)
long_character_event = {
	id = robmodnorse.00369
	desc = EVTDESC_ROBMODNORSE_00369
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = {
				NOR = {
					FROM = { is_female = yes }
					FROMFROM = { is_female = yes }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00369_MEN
		}
		name = {
			trigger = {
				OR = {
					FROM = { is_female = yes }
					FROMFROM = { is_female = yes }
				}
			}
			text = EVTOPTA_ROBMODNORSE_00369_WOMAN
		}
		tooltip = {
			FROMFROM = { prestige = 30 }
		}
		tooltip = {
			FROM = { prestige = -10 }
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

# I have fought well at the tournament
character_event = {
	id = robmodnorse.00352
	desc = EVTDESC_ROBMODNORSE_00352
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00352 # I have fought well
		add_society_currency_medium_effect = yes
		prestige = 100
		any_society_member = {
			limit = {
				society_member_of = norse_champions
				NOT = { character = ROOT }
				NOT = { has_character_flag = robmodnorse_tournament_dnd }
			}
			opinion = {
				modifier = opinion_robmodnorse_tournament_fought_well
				who = ROOT
				years = 5
			}
			hidden_tooltip = {
				character_event = { id = robmodnorse.00353 }	# notifies all Champions of good performance
			}
		}
		if = {
			limit = { trait = humble }
			random = {
				chance = 50
				remove_trait = humble
				hidden_tooltip = {
					character_event = { id = 38312 }
				}
			}
		}
		if = {
			limit = {
				NOR = {
					trait = humble
					trait = proud
				}
			}
			random = {
				chance = 20
				add_trait = proud
				hidden_tooltip = {
					character_event = { id = 38261 }
				}
			}
		}
		set_character_flag = robmodnorse_tournament_fought_well
	}
}

# Notification
character_event = {
	id = robmodnorse.00353
	desc = EVTDESC_ROBMODNORSE_00353
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag = robmodnorse_tournament_participating }
			text = EVTOPTA_ROBMODNORSE_00353_PAR
		}
		name = {
			trigger = {
				NOT = { has_character_flag = robmodnorse_tournament_participating }
			}
			text = EVTOPTA_ROBMODNORSE_00353_NOT
		}
		tooltip = {
			FROM = { prestige = 30 }
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

# I have been killed at the tournament
character_event = {
	id = robmodnorse.00344
	desc = EVTDESC_ROBMODNORSE_00344_BOAR
	desc = EVTDESC_ROBMODNORSE_00344_CABER
	desc = EVTDESC_ROBMODNORSE_00344_SPEAR
	desc = EVTDESC_ROBMODNORSE_00344_RACE
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00344 # Death
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { character = ROOT }
					NOT = { has_character_flag = robmodnorse_tournament_dnd }
				}
				character_event = { id = robmodnorse.00354 }	# notifies all Champions of death
			}
		}
		death = { death_reason = death_robmodnorse_tournament }
	}
}

# Notification
character_event = {
	id = robmodnorse.00354
	desc = EVTDESC_ROBMODNORSE_00354
	picture = GFX_evt_death_norse_pagan
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00354 # A true loss
		tooltip = {
			FROM = {
				death = { death_reason = death_robmodnorse_tournament }
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

# I have been maimed at the tournament
character_event = {
	id = robmodnorse.00345
	desc = EVTDESC_ROBMODNORSE_00345_CHARIOT
	desc = EVTDESC_ROBMODNORSE_00345_DUEL
	desc = EVTDESC_ROBMODNORSE_00345_BEAR
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00345 # Maim
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { character = ROOT }
					NOT = { has_character_flag = robmodnorse_tournament_dnd }
				}
				character_event = { id = robmodnorse.00355 }	# notifies all Champions of maim
			}
		}
		add_maimed_trait_effect = yes
		remove_character_modifier = robmodnorse_tournament_participating
		clr_character_flag = robmodnorse_tournament_participating
	}
}

# Notification
character_event = {
	id = robmodnorse.00355
	desc = EVTDESC_ROBMODNORSE_00355
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag = robmodnorse_tournament_participating }
			text = EVTOPTA_ROBMODNORSE_00355_PAR
		}
		name = {
			trigger = {
				NOT = { has_character_flag = robmodnorse_tournament_participating }
			}
			text = EVTOPTA_ROBMODNORSE_00355_NOT
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

# I have been wounded at the tournament
character_event = {
	id = robmodnorse.00346
	desc = EVTDESC_ROBMODNORSE_00345_CHARIOT
	desc = EVTDESC_ROBMODNORSE_00346_DUEL
	desc = EVTDESC_ROBMODNORSE_00345_BEAR
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00345 # Wound
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { character = ROOT }
					NOT = { has_character_flag = robmodnorse_tournament_dnd }
				}
				character_event = { id = robmodnorse.00356 }	# notifies all Champions of wounding
			}
		}
		add_trait = wounded
		remove_character_modifier = robmodnorse_tournament_participating
		clr_character_flag = robmodnorse_tournament_participating
	}
}

# Notification
character_event = {
	id = robmodnorse.00356
	desc = EVTDESC_ROBMODNORSE_00356
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag = robmodnorse_tournament_participating }
			text = EVTOPTA_ROBMODNORSE_00355_PAR
		}
		name = {
			trigger = {
				NOT = { has_character_flag = robmodnorse_tournament_participating }
			}
			text = EVTOPTA_ROBMODNORSE_00355_NOT
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

# I have been motivated and lost slothful / gained diligent
character_event = {
	id = robmodnorse.00357
	desc = EVTDESC_ROBMODNORSE_00357
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00357 # Lose slothful / gain diligent
		if = { 
			limit = { trait = slothful }
			remove_trait = slothful
		}
		if = { 
			limit = {
				NOT = { trait = slothful }
			}
			add_trait = diligent
		}
	}
}

# I have enjoyed myself and am no longer depressed
character_event = {
	id = robmodnorse.00358
	desc = EVTDESC_ROBMODNORSE_00358
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00357 # Lose depressed
		remove_trait = depressed
	}
}

# I have enjoyed myself and am no longer stressed
character_event = {
	id = robmodnorse.00359
	desc = EVTDESC_ROBMODNORSE_00358
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00357 # Lose depressed
		remove_trait = stressed
	}
}

# I have been motivated and lost content / gained ambitious
character_event = {
	id = robmodnorse.00370
	desc = EVTDESC_ROBMODNORSE_00370
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	trigger = { has_character_flag = robmodnorse_tournament_participating }

	option = {
		name = EVTOPTA_ROBMODNORSE_00357 # Lose slothful / gain diligent
		if = { 
			limit = { trait = content }
			remove_trait = content
		}
		if = { 
			limit = {
				NOT = { trait = content }
			}
			add_trait = ambitious
		}
	}
}

# Decide winner - fires for Kappi-Mestr
character_event = {
	id = robmodnorse.00343
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {	# this checks whether anyone is still standing!
			limit = {
				any_society_member = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
				}
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					has_character_flag = robmodnorse_tournament_fought_well
				}
				save_event_target_as = robmodnorse_tournament_performer
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
					combat_rating = 5
				}
				save_event_target_as = robmodnorse_tournament_talented
			}
			random_society_member = {
				limit = {
					society_member_of = norse_champions
					has_character_flag = robmodnorse_tournament_participating
				}
				save_event_target_as = robmodnorse_tournament_underdog
			}
			set_character_flag = robmodnorse_tournament_still_standing
		}
	}
	
	option = {
		if = {
			limit = { has_character_flag = robmodnorse_tournament_still_standing }
			random_list = {
				35 = {	# performer wins
					modifier = { # checks there is a performer still standing
						factor = 0
						NOT = {
							any_society_member = {
								society_member_of = norse_champions
								has_character_flag = robmodnorse_tournament_participating
								has_character_flag = robmodnorse_tournament_fought_well
							}
						}
					}
					event_target:robmodnorse_tournament_performer = {
						character_event = { id = robmodnorse.00360 }
					}
				}
				45 = {	# talented wins
					modifier = { # checks there is a talented still standing
						factor = 0
						NOT = {
							any_society_member = {
								society_member_of = norse_champions
								has_character_flag = robmodnorse_tournament_participating
								combat_rating = 5
							}
						}
					}
					event_target:robmodnorse_tournament_talented = {
						character_event = { id = robmodnorse.00360 }
					}
				}
				20 = {	# underdog wins
					event_target:robmodnorse_tournament_underdog = {
						character_event = { id = robmodnorse.00360 }
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_character_flag = robmodnorse_tournament_still_standing }
			}
			any_character = {
				limit = {
					OR = {
						OR = {
							religion = norse_pagan_reformed
							religion = norse_pagan
						}
						culture = norse
						society_member_of = norse_champions
					}
				}
				character_event = { id = robmodnorse.00361 }	# All Norse characters informed that no-one is left standing
			}
		}
		clr_character_flag = robmodnorse_tournament_still_standing
	}
}

# Notification that no-one is still standing!
narrative_event = {
	id = robmodnorse.00361
	title = EVTTITLE_ROBMODNORSE_00361
	desc = EVTDESC_ROBMODNORSE_00361
	picture = GFX_evt_holmgang
	border = GFX_event_narrative_frame_war
	hide_from = yes

	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				NOT = { society_member_of = norse_champions }
			}
			text = EVTOPTA_ROBMODNORSE_00361_OBS
		}
		name = {
			trigger = {
				society_member_of = norse_champions
				is_society_grandmaster = no
			}
			text = EVTOPTA_ROBMODNORSE_00361_SOC
		}
		name = {
			trigger = {
				society_member_of = norse_champions
				is_society_grandmaster = yes
			}
			text = EVTOPTA_ROBMODNORSE_00361_GC
		}
		if = {
			limit = { character = FROM }
			add_character_modifier = {
				modifier = robmodnorse_champion_tournament
				years = 5
			}
			prestige = 100
			clr_character_flag = robmodnorse_hosting_champion_tournament
		}
	}
}

# I have won the tournament!
character_event = {
	id = robmodnorse.00360
	desc = EVTDESC_ROBMODNORSE_00360
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_ROBMODNORSE_00360 # Yay me!
		add_society_currency_medium_effect = yes
		prestige = 200
		add_character_modifier = {
			modifier = robmodnorse_tournament_won
			years = 3
		}
		FROM = {
			character_event = {
				id = robmodnorse.00363 # duel ping
				tooltip = EVTTOOLTIPA_ROBMODNORSE_00360
				days = 3
			}
		}
		any_society_member = {
			limit = {
				society_member_of = norse_champions
				NOT = { character = ROOT }
			}
			opinion = { 
				modifier = opinion_robmodnorse_tournament_won
				who = ROOT
				years = 3
			}
		}
		hidden_tooltip = {
			any_society_member = {
				limit = {
					society_member_of = norse_champions
					NOT = { character = ROOT }
					NOT = { has_character_flag = robmodnorse_tournament_dnd }
				}
				character_event = { id = robmodnorse.00362 }	# notifies all Champions of winner
			}
		}
	}
}

# Notification of winner
character_event = {
	id = robmodnorse.00362
	desc = EVTDESC_ROBMODNORSE_00362
	picture = GFX_evt_holmgang
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag = robmodnorse_tournament_participating }
			text = EVTOPTA_ROBMODNORSE_00362_PAR
		}
		name = {
			trigger = {
				NOT = { has_character_flag = robmodnorse_tournament_participating }
			}
			text = EVTOPTA_ROBMODNORSE_00362_NOT
		}
		tooltip = {
			opinion = { 
				modifier = opinion_robmodnorse_tournament_won
				who = FROM
				years = 3
			}
		}
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00352 # Stop bothering me!
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00352 }
		set_character_flag = robmodnorse_tournament_dnd
	}
}

#duel ping - fires for Kappi-Mestr
character_event = {
	id = robmodnorse.00363
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = {
				id = robmodnorse.00364 #duel
			}
			save_event_target_as = robmodnorse_tournament_challenger
		}
		save_event_target_as = robmodnorse_tournament_kappi_mestr
	}
}

# Duel (hidden) FROM is the Kappi-Mestr, ROOT is the challenger
character_event = {
	id = robmodnorse.00364
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		random_list = {
			200 = { # Challenger wins
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 1 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 2 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 3 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 4 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 5 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 6 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 7 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 8 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 9 }
					}
					factor = 0.7
				}
				modifier = {
					FROM = {
						combat_rating_diff = { who = ROOT value = 10 }
					}
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						character_event = { id = robmodnorse.00365 }
					}
					10 = {
						set_character_flag = duel_wounded_opponent
						character_event = { id = robmodnorse.00365 }
					}
					8 = {
						set_character_flag = duel_maimed_opponent
						character_event = { id = robmodnorse.00365 }
					}
					2 = {
						set_character_flag = duel_killed_opponent
						character_event = { id = robmodnorse.00365 }
					}
				}
			}
			200 = { # Kappi-Mestr wins
				modifier = {
					combat_rating_diff = { who = FROM value = 1 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 2 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 3 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 4 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 5 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 6 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 7 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 8 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 9 }
					factor = 0.7
				}
				modifier = {
					combat_rating_diff = { who = FROM value = 10 }
					factor = 0.7
				}
				### effects
				random_list = {
					80 = {						
						FROM = {
							character_event = { id = robmodnorse.00365 }
						}
					}
					10 = {
						FROM = {
							set_character_flag = duel_wounded_opponent
							character_event = { id = robmodnorse.00365 }
						}
					}
					8 = {
						FROM = { 
							set_character_flag = duel_maimed_opponent
							character_event = { id = robmodnorse.00365 }
						}
					}
					2 = {
						FROM = {	
							set_character_flag = duel_killed_opponent
							character_event = { id = robmodnorse.00365 }
						}
					}
				}
			}
		}
	}
}

# Winner event - use event_target names robmodnorse_tournament_challenger & robmodnorse_tournament_kappi_mestr for description
long_character_event = {
	id = robmodnorse.00365
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00365_WON # Won duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00365_WOUND # Won duel and wounded
		trigger = {	has_character_flag = duel_wounded_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00365_MAIM # Won duel and maimed
		trigger = {	has_character_flag = duel_maimed_opponent }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00365_KILL # Won duel and killed
		trigger = {	has_character_flag = duel_killed_opponent }
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTA_ROBMODNORSE_00365_GC
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTA_ROBMODNORSE_00365_NOTGC
		}
		trigger = {
			NOR = { 
				has_character_flag = duel_wounded_opponent
				has_character_flag = duel_maimed_opponent
				has_character_flag = duel_killed_opponent
			}
		}
		add_society_currency_major_effect = yes		
		prestige = 50
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			hidden_tooltip = {
				FROMFROM = {
					long_character_event = { id = robmodnorse.00366 }
				}
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			hidden_tooltip = {
				FROM = {
					long_character_event = { id = robmodnorse.00366 }
				}
			}
		}		
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTB_ROBMODNORSE_00365_GC_WOUND
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTB_ROBMODNORSE_00365_NOTGC_WOUND
		}
		trigger = { has_character_flag = duel_wounded_opponent }
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		add_society_currency_major_effect = yes
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = { 
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_WOUNDED
				}
				set_character_flag = duel_wounded
			}
		}
		clr_character_flag = duel_wounded_opponent
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTC_ROBMODNORSE_00365_GC_MAIMED
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTC_ROBMODNORSE_00365_NOTGC_MAIMED
		}
		trigger = { has_character_flag = duel_maimed_opponent }
		add_society_currency_major_effect = yes
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		prestige = 50
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = { 
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_MAIMED
				}
				set_character_flag = duel_maimed
			}
		}
		clr_character_flag = duel_maimed_opponent
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTD_ROBMODNORSE_00365_GC_KILLED
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTC_ROBMODNORSE_00365_NOTGC_MAIMED
		}
		trigger = { has_character_flag = duel_killed_opponent }
		add_society_currency_major_effect = yes
		prestige = 50
		if = {
			limit = { is_society_grandmaster = no }
			add_character_modifier = {
				modifier = robmodnorse_won_champion
				years = 5
			}
		}
		if = {
			limit = { 
				FROM = { character = ROOT } 
			}
			FROMFROM = {
				long_character_event = {
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		if = {
			limit = { 
				FROM = {
					NOT = { character = ROOT }
				}
			}
			FROM = {
				long_character_event = {
					id = robmodnorse.00366
					tooltip = EVTTOOLTIP_ROBMODNORSE_00366_KILLED
				}
				set_character_flag = duel_killed
			}
		}
		clr_character_flag = duel_killed_opponent
	}
}

# Loser event FROM is winner, ROOT is loser
long_character_event = {
	id = robmodnorse.00366
	is_triggered_only = yes
	picture = GFX_evt_holmgang
	border = GFX_event_long_frame_war
	
	desc = {
		text = EVTDESC_ROBMODNORSE_00366_LOST # Lost duel
		trigger = {	
			NOR = { 
				has_character_flag = duel_wounded
				has_character_flag = duel_maimed
				has_character_flag = duel_killed
			}
		}
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00366_WOUND # Lost duel and wounded
		trigger = {	has_character_flag = duel_wounded }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00366_MAIM # Lost duel and maimed
		trigger = {	has_character_flag = duel_maimed }
	}
	desc = {
		text = EVTDESC_ROBMODNORSE_00366_KILLED # Lost duel and killed
		trigger = {	has_character_flag = duel_killed }
	}
	
	immediate = {
		hidden_tooltip = {
			any_character = {
				limit = {
					OR = {
						religion = norse_pagan_reformed
						religion = norse_pagan
					}
					culture = norse
				}
				character_event = {
					id = robmodnorse.00368	# All Norse characters informed of result of tournament, including society members
					days = 1
				}
			}
		}
	}
	
	option = { 
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTA_ROBMODNORSE_00366_GC
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTA_ROBMODNORSE_00366_NOTGC
		}
		trigger = {
			NOR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
				has_character_flag = duel_killed
			}
		}
		if = {
			limit = { is_society_grandmaster = yes }
			character_event = {
				id = robmodnorse.00367
				tooltip = EVTTOOLTIP_ROBMODNORSE_00366_FORFEIT
				days = 2
			}
			prestige = -50
		}
	}
	
	option = {
		name = {
			trigger = { is_society_grandmaster = yes }
			text = EVTOPTB_ROBMODNORSE_00366_GC_HURT
		}
		name = {
			trigger = { is_society_grandmaster = no }
			text = EVTOPTB_ROBMODNORSE_00366_NOTGC_HURT
		}
		trigger = {
			OR = {
				has_character_flag = duel_maimed
				has_character_flag = duel_wounded
			}
		}
		if = {
			limit = { has_character_flag = duel_maimed }
			add_maimed_trait_effect = yes
		}
		if = {
			limit = { has_character_flag = duel_wounded }
			add_trait = wounded
		}
		if = {
			limit = { is_society_grandmaster = yes }
			character_event = {
				id = robmodnorse.00367
				tooltip = EVTTOOLTIP_ROBMODNORSE_00366_FORFEIT
				days = 2
			}
			prestige = -50
		}
		clr_character_flag = duel_maimed
		clr_character_flag = duel_wounded
	}
	
	option = {
		name = EVTOPTC_ROBMODNORSE_00366
		trigger = { has_character_flag = duel_killed }
		death = {
			death_reason = death_robmodnorse_holmgang
			killer = FROM
		}
	}
}

# All Norse characters told about the result of the Champion's Tournament. From is loser of final duel, FromFrom is winner, use event_target names robmodnorse_tournament_challenger & robmodnorse_tournament_kappi_mestr for description
narrative_event = {
	id = robmodnorse.00368
	title = EVTTITLE_ROBMODNORSE_00361
	desc = {
		trigger = {
			FROM = { is_society_grandmaster = no }
		}
		text = EVTDESC_ROBMODNORSE_00368_GCWON
	}
	desc = {
		trigger = {
			FROM = { is_society_grandmaster = yes }
		}
		text = EVTDESC_ROBMODNORSE_00368_GCLOST
	}
	picture = GFX_evt_holmgang
	border = GFX_event_narrative_frame_war
	hide_from = yes

	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				NOT = { society_member_of = norse_champions }
			}
			text = EVTOPTA_ROBMODNORSE_00368_OBS
		}
		name = {
			trigger = { society_member_of = norse_champions }
			text = EVTOPTA_ROBMODNORSE_00368_CHA
		}
		if = {
			limit = {
				society_member_of = norse_champions
				is_society_grandmaster = yes
			}
			add_character_modifier = {
				modifier = robmodnorse_champion_tournament
				years = 5
			}
			prestige = 100
			clr_character_flag = robmodnorse_hosting_champion_tournament
		}
	}
}

#Losing Grand Champion leaves
character_event = {
	id = robmodnorse.00367
	picture = GFX_evt_kappi_mestr
	desc = EVTDESC_ROBMODNORSE_00367
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00317
		leave_society = yes
		add_trait = robmodnorse_ex_grand_champion
		set_character_flag = robmod_forced_out_of_champions
	}
}

###ACTIONS###

###MISC###

##-Champions of Midgard-##
#Grand Champion dies or leaves society - from on_action on_character_leave_society
character_event = {
	id = robmodnorse.00318
	picture = GFX_evt_kappi_mestr
	desc = EVTDESC_ROBMODNORSE_00318
	border = GFX_event_normal_frame_war
	
	is_in_society = yes
	is_triggered_only = yes
	
	trigger = {
		society_member_of = norse_champions
		is_society_grandmaster = yes
		NOT = { has_character_flag = robmod_forced_out_of_champions }
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00318
		leave_society = yes
		add_trait = robmodnorse_ex_grand_champion
	}
}

#Grand Champion nickname grant
character_event = {
	id = robmodnorse.00319
	picture = GFX_evt_kappi_mestr
	desc = EVTDESC_ROBMODNORSE_00319
	border = GFX_event_normal_frame_war
	
	is_in_society = yes
	is_triggered_only = yes
	
	trigger = {
		society_member_of = norse_champions
		is_society_grandmaster = yes
	}
	
	option = {
		name = EVTOPTA_ROBMODNORSE_00319
		ai_chance = {
			factor = 1000
			modifier = {
				factor = 0
				OR = {
					has_nickname = nick_the_saint
					has_nickname = nick_snake_in_the_eye
					has_nickname = nick_fairhair
					has_nickname = nick_whiteshirt
					has_nickname = nick_hardeknud
					has_nickname = nick_hildetand
					has_nickname = nick_the_stranger
					has_nickname = nick_bloodaxe
					has_nickname = nick_the_german
					has_nickname = nick_haardraade
					has_nickname = nick_lodbrok
					has_nickname = nick_the_boneless
					has_nickname = nick_bluetooth
				}
			}
		}
		hidden_tooltip = { remove_nickname = yes }
		give_nickname = nick_kappi_mestr
	}
	
	option = {
		name = EVTOPTB_ROBMODNORSE_00319
		ai_chance = { factor = 1 }
		custom_tooltip = { text = EVTTOOLTIPB_ROBMODNORSE_00319 }
	}
}

#Misc: squireship
#Ping event for squireship completion
character_event = {
    id = robmodnorse.00371
    hide_window = yes
    is_triggered_only = yes
    trigger = { 
    	liege = {
    		character = FROMFROM
    		is_alive = yes
    		society_member_of = norse_champions
    	}
    	has_minor_title = title_champions_squire

    }
    immediate = { FROMFROM = { character_event = { id = robmodnorse.00372 } } }
}

#Squireship completion
character_event = {
    id = robmodnorse.00372
    desc = EVTDESC_ROBMODNORSE_00372
    picture = GFX_evt_holmgang
    border = GFX_event_normal_frame_war

    is_triggered_only = yes
    
    option = { 
		name = EVTOPTA_ROBMODNORSE_00372

        add_society_currency_major_effect = yes

        FROM = { 
        	set_character_flag = completed_apprenticeship 
        	remove_title = title_champions_squire
        	change_martial = 2
        }
    }
}

#Apprentice died
character_event = {
    id = robmodnorse.00373
    hide_window = yes
    is_triggered_only = yes

    is_in_society = yes
    ai = yes

    trigger = {
    	society_member_of = norse_champions
    	has_minor_title = title_champions_squire
    }

    immediate = {
    	liege = { character_event = { id = robmodnorse.00374 } }
    }
}

#Notification of dead apprentice
character_event = {
    id = robmodnorse.00374
    picture = GFX_evt_viking_funeral_oldgods
    border = GFX_event_normal_frame_war

    desc = {
    	trigger = {
    		NOR = {
    			NOT = { opinion = { value = 0 who = FROM } }
    			NOT = { FROM = { martial = 12 } }
    		}
    	}
    	text = EVTDESC_ROBMODNORSE_00374_01
    }
    desc = {
    	trigger = {
    		OR = {
    			NOT = { opinion = { value = 0 who = FROM } }
    			NOT = { FROM = { martial = 12 } }
    		}
    	}
    	text = EVTDESC_ROBMODNORSE_00374_02
    }

    is_triggered_only = yes
    
    option = { 
        name = EVTOPTA_ROBMODNORSE_00374
    }
}

###INTERACTION EVENTS###